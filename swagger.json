{
  "openapi": "3.0.0",
  "paths": {
    "/auth/register": {
      "post": {
        "description": "Crea una nueva cuenta de usuario con detección automática de idioma y zona horaria basada en la IP del cliente",
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos del nuevo usuario",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequestDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "email": "usuario@ejemplo.com",
                    "password": "contraseñaSegura123",
                    "name": "Nombre del Usuario",
                    "username": "nombreusuario",
                    "phone": "+1234567890",
                    "birthdate": "1990-01-01",
                    "language": "es",
                    "timezone": "America/Mexico_City"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario registrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "email": {
                      "type": "string",
                      "example": "usuario@ejemplo.com"
                    },
                    "name": {
                      "type": "string",
                      "example": "Nombre del Usuario"
                    },
                    "username": {
                      "type": "string",
                      "example": "nombreusuario"
                    },
                    "phone": {
                      "type": "string",
                      "example": "+1234567890"
                    },
                    "verified": {
                      "type": "boolean",
                      "example": false
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2025-11-28T19:52:12.930Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "El email debe ser un correo válido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "El correo electrónico o nombre de usuario ya está en uso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 409
                    },
                    "message": {
                      "type": "string",
                      "example": "El email ya está registrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Conflict"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Registrar nuevo usuario",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "description": "Obtiene un nuevo token de acceso usando un token de actualización almacenado en cookie HttpOnly. La cookie debe enviarse automáticamente con withCredentials: true",
        "operationId": "AuthController_refreshToken",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Token refrescado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
                    },
                    "stores": {
                      "type": "array",
                      "description": "Tiendas asociadas al usuario (para ADMIN: todas las tiendas, para USER: tiendas asignadas)",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440001"
                          },
                          "name": {
                            "type": "string",
                            "example": "Tienda Principal"
                          },
                          "address": {
                            "type": "string",
                            "example": "Av. Principal 123"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+123456789"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "createdById": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440002"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Cookie de refresh_token no encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "No se encontró cookie de refresh_token"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token de actualización inválido o expirado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Token de actualización inválido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Refrescar token",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "description": "Autentica un usuario usando email y contraseña. Devuelve access_token en JSON y establece refresh_token en cookie HttpOnly segura",
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Credenciales de inicio de sesión",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "usuario@ejemplo.com",
                    "description": "Correo electrónico del usuario"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "contraseñaSegura123",
                    "description": "Contraseña del usuario"
                  }
                },
                "required": [
                  "email",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Inicio de sesión exitoso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "550e8400-e29b-41d4-a716-446655440001"
                        },
                        "email": {
                          "type": "string",
                          "example": "usuario@ejemplo.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "Nombre del Usuario"
                        },
                        "username": {
                          "type": "string",
                          "example": "nombreusuario"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "USER",
                            "ADMIN"
                          ],
                          "example": "USER"
                        },
                        "verified": {
                          "type": "boolean",
                          "example": true
                        },
                        "stores": {
                          "type": "array",
                          "description": "Tiendas asociadas al usuario (para ADMIN: todas las tiendas, para USER: tiendas asignadas)",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "550e8400-e29b-41d4-a716-446655440001"
                              },
                              "name": {
                                "type": "string",
                                "example": "Tienda Principal"
                              },
                              "address": {
                                "type": "string",
                                "example": "Av. Principal 123"
                              },
                              "phone": {
                                "type": "string",
                                "example": "+123456789"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "createdById": {
                                "type": "string",
                                "example": "550e8400-e29b-41d4-a716-446655440002"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Credenciales inválidas o cuenta no verificada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Credenciales inválidas"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Cuenta no verificada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Por favor verifica tu correo electrónico"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Iniciar sesión",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/login/username": {
      "post": {
        "description": "Autentica un usuario usando nombre de usuario y contraseña. Devuelve access_token en JSON y establece refresh_token en cookie HttpOnly segura",
        "operationId": "AuthController_loginWithUsername",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "example": "usuario123",
                    "description": "Nombre de usuario único"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "contraseñaSegura123",
                    "description": "Contraseña del usuario"
                  }
                },
                "required": [
                  "username",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Inicio de sesión exitoso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "550e8400-e29b-41d4-a716-446655440001"
                        },
                        "email": {
                          "type": "string",
                          "example": "usuario@ejemplo.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "Nombre del Usuario"
                        },
                        "username": {
                          "type": "string",
                          "example": "usuario123"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "USER",
                            "ADMIN"
                          ],
                          "example": "USER"
                        },
                        "verified": {
                          "type": "boolean",
                          "example": true
                        },
                        "stores": {
                          "type": "array",
                          "description": "Tiendas asociadas al usuario (para ADMIN: todas las tiendas, para USER: tiendas asignadas)",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "550e8400-e29b-41d4-a716-446655440001"
                              },
                              "name": {
                                "type": "string",
                                "example": "Tienda Principal"
                              },
                              "address": {
                                "type": "string",
                                "example": "Av. Principal 123"
                              },
                              "phone": {
                                "type": "string",
                                "example": "+123456789"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "createdById": {
                                "type": "string",
                                "example": "550e8400-e29b-41d4-a716-446655440002"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Credenciales inválidas o cuenta no verificada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Credenciales inválidas"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Cuenta no verificada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Por favor verifica tu correo electrónico"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Iniciar sesión con nombre de usuario",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/verify": {
      "get": {
        "description": "Verifica la dirección de correo electrónico del usuario usando un token de verificación. Redirige al frontend con mensaje de éxito o error",
        "operationId": "AuthController_verifyEmail",
        "parameters": [
          {
            "name": "token",
            "required": true,
            "in": "query",
            "description": "Token de verificación enviado por correo electrónico",
            "schema": {
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ2ZXJpZmljYXRpb24iLCJpYXQiOjE2MzAwMDAwMDAsImV4cCI6MTYzMDA4NjQwMH0.signature",
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirección al frontend",
            "headers": {
              "Location": {
                "description": "URL de redirección al frontend",
                "schema": {
                  "type": "string",
                  "example": "http://localhost:3000/login?verified=true"
                }
              }
            }
          },
          "400": {
            "description": "Token de verificación inválido o expirado",
            "headers": {
              "Location": {
                "description": "URL de redirección al frontend con error",
                "schema": {
                  "type": "string",
                  "example": "http://localhost:3000/verify-email?error=invalid_token"
                }
              }
            }
          }
        },
        "summary": "Verificar correo electrónico",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/change-password": {
      "patch": {
        "description": "Permite a un usuario autenticado cambiar su contraseña actual",
        "operationId": "AuthController_changePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos para el cambio de contraseña",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthChangePasswordDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "email": "usuario@ejemplo.com",
                    "currentPassword": "contraseñaActual123",
                    "newPassword": "nuevaContraseñaSegura123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña cambiada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Contraseña actualizada exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o la nueva contraseña no cumple con los requisitos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "La nueva contraseña debe ser diferente a la actual"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token inválido o expirado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Credenciales actuales incorrectas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Credenciales actuales incorrectas"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Cambiar contraseña",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/request-password-reset": {
      "post": {
        "description": "Envía un correo electrónico con un enlace para restablecer la contraseña. Por seguridad, siempre devuelve éxito sin revelar si el email existe",
        "operationId": "AuthController_requestPasswordReset",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Correo electrónico del usuario que desea restablecer su contraseña",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "usuario@ejemplo.com",
                    "description": "Correo electrónico del usuario"
                  }
                },
                "required": [
                  "email"
                ]
              },
              "examples": {
                "validEmail": {
                  "summary": "Email válido",
                  "value": {
                    "email": "usuario@ejemplo.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solicitud procesada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Si el correo existe, recibirás un enlace para resetear tu contraseña, intentalo de nuevo si no recibes nada."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Formato de correo electrónico inválido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "El email debe ser un correo válido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Solicitar restablecimiento de contraseña",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/auth/reset-password": {
      "patch": {
        "description": "Restablece la contraseña de un usuario usando un token de restablecimiento válido. El token expira después de 1 hora",
        "operationId": "AuthController_resetPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Token de restablecimiento y nueva contraseña",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJyZXNldCIsImlhdCI6MTYzMDAwMDAwMCwiZXhwIjoxNjMwMDM2NDAwfQ.signature",
                    "description": "Token de restablecimiento recibido por correo"
                  },
                  "newPassword": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "nuevaContraseñaSegura123",
                    "description": "Nueva contraseña (mínimo 8 caracteres)"
                  }
                },
                "required": [
                  "token",
                  "newPassword"
                ]
              },
              "examples": {
                "validReset": {
                  "summary": "Restablecimiento válido",
                  "value": {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJyZXNldCIsImlhdCI6MTYzMDAwMDAwMCwiZXhwIjoxNjMwMDM2NDAwfQ.signature",
                    "newPassword": "nuevaContraseñaSegura123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña restablecida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Contraseña restablecida correctamente."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Token inválido, expirado o nueva contraseña inválida",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "No se pudo restablecer la contraseña. El token puede ser inválido o haber expirado."
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Restablecer contraseña",
        "tags": [
          "Autenticación"
        ]
      }
    },
    "/users/upload-avatar": {
      "post": {
        "description": "Sube una imagen como avatar. Los administradores pueden subir para cualquier usuario especificando userId, los usuarios regulares solo pueden subir su propio avatar.",
        "operationId": "UsersController_uploadAvatar",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen (JPG, JPEG, PNG) hasta 5MB"
                  },
                  "userId": {
                    "type": "string",
                    "description": "ID del usuario al que se le asignará el avatar (solo para administradores)"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar actualizado exitosamente"
          },
          "400": {
            "description": "Archivo no válido o usuario no encontrado"
          },
          "403": {
            "description": "No autorizado para actualizar este perfil"
          }
        },
        "summary": "Subir avatar de usuario",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/me/avatar": {
      "post": {
        "description": "Sube una imagen como avatar del usuario autenticado",
        "operationId": "UsersController_uploadMyAvatar",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen (JPG, JPEG, PNG) hasta 5MB"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar actualizado exitosamente"
          },
          "400": {
            "description": "Archivo no válido"
          }
        },
        "summary": "Subir mi avatar",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/create": {
      "post": {
        "description": "Crea un nuevo usuario con los datos proporcionados. El username se generará automáticamente si no se especifica. Requiere rol de ADMIN",
        "operationId": "UsersController_createUser",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSimpleUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado exitosamente"
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "409": {
            "description": "El correo electrónico o teléfono ya está en uso"
          }
        },
        "summary": "Crear nuevo usuario",
        "tags": [
          "Users"
        ]
      }
    },
    "/users": {
      "get": {
        "description": "Obtiene una lista de todos los usuarios registrados. Requiere rol de ADMIN",
        "operationId": "UsersController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de usuarios obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "550e8400-e29b-41d4-a716-446655440001"
                      },
                      "email": {
                        "type": "string",
                        "example": "usuario@ejemplo.com"
                      },
                      "name": {
                        "type": "string",
                        "example": "Nombre del Usuario"
                      },
                      "role": {
                        "type": "string",
                        "enum": [
                          "USER",
                          "ADMIN"
                        ],
                        "example": "USER"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "ACTIVE",
                          "INACTIVE",
                          "SUSPENDED",
                          "DELETED"
                        ],
                        "example": "ACTIVE",
                        "description": "Estado actual del usuario"
                      },
                      "phone": {
                        "type": "string",
                        "example": "+123456789"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "stores": {
                        "type": "array",
                        "description": "Tiendas asociadas al usuario (para ADMIN: todas las tiendas, para USER: tiendas asignadas)",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440001"
                            },
                            "name": {
                              "type": "string",
                              "example": "Tienda Principal"
                            },
                            "address": {
                              "type": "string",
                              "example": "Av. Principal 123"
                            },
                            "phone": {
                              "type": "string",
                              "example": "+123456789"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "createdById": {
                              "type": "string",
                              "example": "550e8400-e29b-41d4-a716-446655440002"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          }
        },
        "summary": "Obtener todos los usuarios",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/change-password": {
      "put": {
        "description": "Permite a un usuario con rol USER cambiar su contraseña. Se requiere la contraseña actual para realizar el cambio.",
        "operationId": "UsersController_changePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos requeridos para el cambio de contraseña",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "currentPassword": "contraseñaActual123",
                    "newPassword": "nuevaContraseñaSegura123",
                    "confirmNewPassword": "nuevaContraseñaSegura123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Contraseña actualizada exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Las contraseñas no coinciden"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Credenciales inválidas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "La contraseña actual es incorrecta"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Cambiar contraseña de usuario",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/{id}": {
      "get": {
        "description": "Obtiene los datos de un usuario específico por su ID. Requiere autenticación JWT pero no requiere rol específico.",
        "operationId": "UsersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del usuario a consultar",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "email": {
                      "type": "string",
                      "example": "usuario@ejemplo.com"
                    },
                    "name": {
                      "type": "string",
                      "example": "Nombre del Usuario"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "USER",
                        "ADMIN"
                      ],
                      "example": "USER"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "ACTIVE",
                        "INACTIVE",
                        "SUSPENDED",
                        "DELETED"
                      ],
                      "example": "ACTIVE",
                      "description": "Estado actual del usuario"
                    },
                    "phone": {
                      "type": "string",
                      "example": "+123456789"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "stores": {
                      "type": "array",
                      "description": "Tiendas asociadas al usuario (para ADMIN: todas las tiendas, para USER: tiendas asignadas)",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440001"
                          },
                          "name": {
                            "type": "string",
                            "example": "Tienda Principal"
                          },
                          "address": {
                            "type": "string",
                            "example": "Av. Principal 123"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+123456789"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "createdById": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440002"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Se requiere autenticación JWT",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario no encontrado"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener usuario por ID",
        "tags": [
          "Users"
        ]
      },
      "delete": {
        "description": "Realiza un soft delete de un usuario cambiando su status a DELETED. El usuario no se elimina físicamente de la base de datos. Requiere rol de ADMIN.",
        "operationId": "UsersController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del usuario a eliminar (soft delete)",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario eliminado exitosamente (soft delete)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "email": {
                      "type": "string",
                      "example": "usuario@ejemplo.com"
                    },
                    "name": {
                      "type": "string",
                      "example": "Nombre del Usuario"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "USER",
                        "ADMIN"
                      ],
                      "example": "USER"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "ACTIVE",
                        "INACTIVE",
                        "SUSPENDED",
                        "DELETED"
                      ],
                      "example": "DELETED"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Requiere rol de ADMIN",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario no encontrado"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Eliminar usuario (Soft Delete)",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/update/{id}": {
      "put": {
        "description": "Actualiza los datos del perfil de un usuario existente. ADMIN puede editar cualquier usuario, USER solo puede editar sus propios datos. No permite cambiar rol ni contraseña.",
        "operationId": "UsersController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del usuario a actualizar (USER solo puede usar su propio ID)",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440001",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Datos del usuario a actualizar (sin rol ni contraseña). Todos los campos son opcionales.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              },
              "examples": {
                "ejemplo_actualizacion_user": {
                  "summary": "Actualización de usuario normal (USER)",
                  "description": "Ejemplo de lo que un USER puede editar de su propio perfil (campos restringidos no permitidos)",
                  "value": {
                    "name": "Juan Pérez Actualizado",
                    "phone": "+346987654321",
                    "language": "es",
                    "timezone": "Europe/Madrid",
                    "birthdate": "1990-01-01"
                  }
                },
                "ejemplo_actualizacion_admin": {
                  "summary": "Actualización completa por ADMIN",
                  "description": "Ejemplo de lo que un ADMIN puede editar de cualquier usuario (incluyendo campos restringidos)",
                  "value": {
                    "name": "María García López",
                    "email": "maria.garcia@ejemplo.com",
                    "phone": "+346123456789",
                    "username": "maria.garcia",
                    "birthdate": "1990-01-01",
                    "language": "es",
                    "timezone": "Europe/Madrid",
                    "status": "ACTIVE",
                    "avatarUrl": "https://example.com/avatars/maria.jpg",
                    "verified": true,
                    "storeId": "550e8400-e29b-41d4-a716-446655440003"
                  }
                },
                "ejemplo_cambio_tienda": {
                  "summary": "Cambiar tienda asignada al usuario",
                  "description": "Ejemplo para cambiar la tienda a la que pertenece un usuario (solo para USER)",
                  "value": {
                    "storeId": "550e8400-e29b-41d4-a716-446655440003"
                  }
                },
                "ejemplo_cambio_estado": {
                  "summary": "Cambiar estado del usuario",
                  "description": "Ejemplo para activar/desactivar un usuario",
                  "value": {
                    "status": "INACTIVE"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuario actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "email": {
                      "type": "string",
                      "example": "usuario@ejemplo.com"
                    },
                    "name": {
                      "type": "string",
                      "example": "Nombre del Usuario"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "USER",
                        "ADMIN"
                      ],
                      "example": "USER"
                    },
                    "phone": {
                      "type": "string",
                      "example": "+123456789"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "stores": {
                      "type": "array",
                      "description": "Tiendas asociadas al usuario",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440001"
                          },
                          "name": {
                            "type": "string",
                            "example": "Tienda Principal"
                          },
                          "address": {
                            "type": "string",
                            "example": "Av. Principal 123"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+123456789"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "createdById": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440002"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Datos de entrada inválidos"
                    },
                    "details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "email"
                          },
                          "message": {
                            "type": "string",
                            "example": "Email inválido"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Requiere rol de ADMIN",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario no encontrado"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflicto - Email o username ya existen",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 409
                    },
                    "message": {
                      "type": "string",
                      "example": "El correo electrónico ya está en uso"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Actualizar perfil de usuario",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/change-role": {
      "put": {
        "description": "Cambia el rol de un usuario existente. REQUIERE: 1) Usuario ADMIN autenticado con JWT, 2) Credenciales válidas (email/password) del usuario cuyo rol se cambiará. Incluye auditoría completa de quién realizó el cambio.",
        "operationId": "UsersController_changeRole",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Credenciales del usuario y nuevo rol",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangeRoleDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "email": "usuario@example.com",
                    "password": "contraseñaSegura123",
                    "newRole": "ADMIN"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rol actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Rol actualizado exitosamente"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "uuid"
                        },
                        "email": {
                          "type": "string",
                          "example": "usuario@example.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "Nombre Usuario"
                        },
                        "role": {
                          "type": "string",
                          "example": "ADMIN"
                        }
                      }
                    },
                    "changedBy": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "admin-uuid"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        },
                        "role": {
                          "type": "string",
                          "example": "ADMIN"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "401": {
            "description": "Credenciales inválidas"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        },
        "summary": "Cambiar rol de usuario",
        "tags": [
          "Users"
        ]
      }
    },
    "/contact": {
      "post": {
        "operationId": "MailController_sendContactEmail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Mail"
        ]
      }
    },
    "/clientes": {
      "post": {
        "description": "Crea un nuevo registro de cliente en el sistema",
        "operationId": "ClientController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateClientDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "El cliente ha sido creado exitosamente"
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "409": {
            "description": "El cliente ya existe (email, RUC o DNI duplicado)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Crear un nuevo cliente",
        "tags": [
          "clientes"
        ]
      },
      "get": {
        "description": "Obtiene una lista paginada de todos los clientes. Solo para ADMIN",
        "operationId": "ClientController_findAll",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Límite de resultados por página (por defecto: 10)",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Número de página (por defecto: 1)",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de clientes obtenida exitosamente"
          },
          "403": {
            "description": "No autorizado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obtener todos los clientes",
        "tags": [
          "clientes"
        ]
      }
    },
    "/clientes/{id}": {
      "get": {
        "description": "Obtiene los detalles de un cliente específico. Los usuarios solo pueden ver su propio perfil",
        "operationId": "ClientController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del cliente (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente encontrado"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Cliente no encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obtener un cliente por ID",
        "tags": [
          "clientes"
        ]
      },
      "patch": {
        "description": "Actualiza los datos de un cliente existente. Los usuarios solo pueden actualizar su propio perfil",
        "operationId": "ClientController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del cliente (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateClientDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cliente actualizado exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Cliente no encontrado"
          },
          "409": {
            "description": "Conflicto con datos únicos (email, RUC o DNI duplicado)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Actualizar un cliente",
        "tags": [
          "clientes"
        ]
      },
      "delete": {
        "description": "Elimina un cliente del sistema. Solo para ADMIN",
        "operationId": "ClientController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del cliente (UUID)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente eliminado exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Cliente no encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Eliminar un cliente",
        "tags": [
          "clientes"
        ]
      }
    },
    "/clientes/search": {
      "get": {
        "description": "Busca clientes por nombre, email o teléfono. Solo para ADMIN",
        "operationId": "ClientController_search",
        "parameters": [
          {
            "name": "query",
            "required": true,
            "in": "query",
            "description": "Término de búsqueda",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de la búsqueda"
          },
          "403": {
            "description": "No autorizado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Buscar clientes",
        "tags": [
          "clientes"
        ]
      }
    },
    "/clientes/dni/{dni}": {
      "get": {
        "description": "Busca un cliente específico mediante su número de DNI. Disponible para usuarios ADMIN y USER. Ambos roles pueden ver cualquier cliente del sistema.",
        "operationId": "ClientController_findByDni",
        "parameters": [
          {
            "name": "dni",
            "required": true,
            "in": "path",
            "description": "Número de DNI del cliente a buscar",
            "schema": {
              "example": "76543210",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "name": {
                      "type": "string",
                      "example": "Juan Pérez"
                    },
                    "email": {
                      "type": "string",
                      "example": "juan.perez@email.com"
                    },
                    "phone": {
                      "type": "string",
                      "example": "987654321"
                    },
                    "address": {
                      "type": "string",
                      "example": "Av. Principal 123"
                    },
                    "ruc": {
                      "type": "string",
                      "example": "20123456789"
                    },
                    "dni": {
                      "type": "string",
                      "example": "76543210"
                    },
                    "userId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Formato de DNI inválido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "El DNI debe ser un número de 8 dígitos"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Se requiere autenticación JWT",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontró ningún cliente con el DNI proporcionado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "No se encontró cliente con DNI 76543210"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obtener cliente por DNI",
        "tags": [
          "clientes"
        ]
      }
    },
    "/orders/create": {
      "post": {
        "operationId": "OrderController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrderDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/complete": {
      "patch": {
        "operationId": "OrderController_completeOrder",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteOrderDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/me": {
      "get": {
        "operationId": "OrderController_findMe",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders": {
      "get": {
        "operationId": "OrderController_getOrders",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/store/{storeId}": {
      "get": {
        "operationId": "OrderController_getOrdersByStore",
        "parameters": [
          {
            "name": "storeId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/{id}": {
      "get": {
        "operationId": "OrderController_getOrderById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/user/{userId}": {
      "get": {
        "operationId": "OrderController_getUserOrders",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/orders/{id}/cancel": {
      "patch": {
        "operationId": "OrderController_cancelOrder",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Order"
        ]
      }
    },
    "/cash-movement/manual": {
      "post": {
        "description": "Crea un movimiento de caja manual (fuera de órdenes). Requiere autenticación JWT y rol USER o ADMIN.",
        "operationId": "CashMovementController_createManual",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos para crear el movimiento manual",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCashMovementDto"
              },
              "examples": {
                "ingreso": {
                  "summary": "Movimiento de ingreso",
                  "description": "Ejemplo de un movimiento de ingreso por venta",
                  "value": {
                    "cashSessionId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "amount": 100.5,
                    "type": "INCOME",
                    "description": "Venta de productos varios"
                  }
                },
                "salida": {
                  "summary": "Movimiento de egreso",
                  "description": "Ejemplo de un movimiento de egreso por gastos",
                  "value": {
                    "cashSessionId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "amount": 25,
                    "type": "EXPENSE",
                    "description": "Gastos de oficina"
                  }
                },
                "con_orden": {
                  "summary": "Movimiento asociado a orden",
                  "description": "Ejemplo de un movimiento manual asociado a una orden existente",
                  "value": {
                    "cashSessionId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "amount": 50,
                    "type": "INCOME",
                    "description": "Pago parcial de orden #123",
                    "orderId": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                    "clientId": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Movimiento de caja creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                    },
                    "cashSessionId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "amount": {
                      "type": "number",
                      "example": 100.5
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "INCOME",
                        "EXPENSE"
                      ],
                      "example": "INCOME"
                    },
                    "description": {
                      "type": "string",
                      "example": "Venta de productos varios"
                    },
                    "orderId": {
                      "type": "string",
                      "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012"
                    },
                    "clientId": {
                      "type": "string",
                      "example": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Datos de entrada inválidos"
                    },
                    "details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "amount"
                          },
                          "message": {
                            "type": "string",
                            "example": "El monto debe ser un número"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No tienes permisos para realizar movimientos en esta sesión",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para realizar movimientos en esta sesión"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "La sesión de caja especificada no existe",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "La sesión de caja especificada no existe"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Crear movimiento manual de caja",
        "tags": [
          "Cash Movements"
        ]
      }
    },
    "/cash-movement/balance/{cashSessionId}": {
      "get": {
        "description": "Obtiene el cuadre de caja de una sesión específica con todos los movimientos y balance actual. Requiere rol USER o ADMIN.",
        "operationId": "CashMovementController_getCashBalance",
        "parameters": [
          {
            "name": "cashSessionId",
            "required": true,
            "in": "path",
            "description": "ID de la sesión de caja a consultar",
            "schema": {
              "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cuadre de caja obtenido exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "cashSessionId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "initialBalance": {
                      "type": "number",
                      "example": 500,
                      "description": "Balance inicial de la sesión"
                    },
                    "totalIncome": {
                      "type": "number",
                      "example": 1250.75,
                      "description": "Total de ingresos"
                    },
                    "totalExpense": {
                      "type": "number",
                      "example": 150.25,
                      "description": "Total de egresos"
                    },
                    "currentBalance": {
                      "type": "number",
                      "example": 1600.5,
                      "description": "Balance actual"
                    },
                    "movementsCount": {
                      "type": "number",
                      "example": 15,
                      "description": "Cantidad total de movimientos"
                    },
                    "movements": {
                      "type": "array",
                      "description": "Lista de todos los movimientos de la sesión",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                          },
                          "amount": {
                            "type": "number",
                            "example": 100.5
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "INCOME",
                              "EXPENSE"
                            ],
                            "example": "INCOME"
                          },
                          "description": {
                            "type": "string",
                            "example": "Venta de productos"
                          },
                          "orderId": {
                            "type": "string",
                            "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012"
                          },
                          "clientId": {
                            "type": "string",
                            "example": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "sessionInfo": {
                      "type": "object",
                      "description": "Información adicional de la sesión",
                      "properties": {
                        "storeId": {
                          "type": "string",
                          "example": "e5f6a7b8-c9d0-1234-ef01-567890123456"
                        },
                        "storeName": {
                          "type": "string",
                          "example": "Tienda Principal"
                        },
                        "userId": {
                          "type": "string",
                          "example": "f6a7b8c9-d0e1-2345-f012-678901234567"
                        },
                        "userName": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "openedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "closedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No tienes permisos para ver esta sesión de caja",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para ver esta sesión de caja"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "La sesión de caja especificada no existe",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "La sesión de caja especificada no existe"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener cuadre de caja",
        "tags": [
          "Cash Movements"
        ]
      }
    },
    "/cash-movement/session/{sessionId}": {
      "get": {
        "description": "Obtiene todos los movimientos de una sesión de caja específica con paginación opcional. Requiere rol USER o ADMIN",
        "operationId": "CashMovementController_findBySession",
        "parameters": [
          {
            "name": "sessionId",
            "required": true,
            "in": "path",
            "description": "ID de la sesión de caja para obtener sus movimientos",
            "schema": {
              "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Número de página (default: 1)",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Cantidad de resultados por página (default: 50)",
            "schema": {
              "example": 50,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Movimientos obtenidos exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                          },
                          "cashSessionId": {
                            "type": "string",
                            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                          },
                          "amount": {
                            "type": "number",
                            "example": 100.5
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "INCOME",
                              "EXPENSE"
                            ],
                            "example": "INCOME"
                          },
                          "description": {
                            "type": "string",
                            "example": "Venta de productos varios"
                          },
                          "orderId": {
                            "type": "string",
                            "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                            "nullable": true
                          },
                          "clientId": {
                            "type": "string",
                            "example": "c3d4e5f6-a7b8-9012-cdef-345678901234",
                            "nullable": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "total": {
                      "type": "number",
                      "example": 125,
                      "description": "Total de movimientos"
                    },
                    "page": {
                      "type": "number",
                      "example": 1,
                      "description": "Página actual"
                    },
                    "limit": {
                      "type": "number",
                      "example": 50,
                      "description": "Resultados por página"
                    },
                    "totalPages": {
                      "type": "number",
                      "example": 3,
                      "description": "Total de páginas"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No tienes permisos para ver los movimientos de esta sesión",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para ver los movimientos de esta sesión"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "La sesión de caja especificada no existe",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "La sesión de caja especificada no existe"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener movimientos por sesión",
        "tags": [
          "Cash Movements"
        ]
      }
    },
    "/cash-movement": {
      "get": {
        "description": "Obtiene una lista de todos los movimientos de caja registrados. Requiere rol ADMIN",
        "operationId": "CashMovementController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de movimientos obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                      },
                      "cashSessionId": {
                        "type": "string",
                        "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                      },
                      "amount": {
                        "type": "number",
                        "example": 100.5
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "INCOME",
                          "EXPENSE"
                        ],
                        "example": "INCOME"
                      },
                      "description": {
                        "type": "string",
                        "example": "Venta de productos varios"
                      },
                      "orderId": {
                        "type": "string",
                        "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                        "nullable": true
                      },
                      "clientId": {
                        "type": "string",
                        "example": "c3d4e5f6-a7b8-9012-cdef-345678901234",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "cashSession": {
                        "type": "object",
                        "description": "Información de la sesión de caja asociada",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                          },
                          "storeId": {
                            "type": "string",
                            "example": "e5f6a7b8-c9d0-1234-ef01-567890123456"
                          },
                          "userId": {
                            "type": "string",
                            "example": "f6a7b8c9-d0e1-2345-f012-678901234567"
                          },
                          "openedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "closedAt": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Se requiere rol ADMIN",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado - Se requiere rol ADMIN"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener todos los movimientos de caja",
        "tags": [
          "Cash Movements"
        ]
      }
    },
    "/cash-movement/{id}": {
      "get": {
        "description": "Obtiene los detalles de un movimiento específico por su ID. Requiere rol USER o ADMIN",
        "operationId": "CashMovementController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del movimiento a consultar",
            "schema": {
              "example": "d4e5f6a7-b8c9-0123-def0-456789012345",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Movimiento encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                    },
                    "cashSessionId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "amount": {
                      "type": "number",
                      "example": 100.5
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "INCOME",
                        "EXPENSE"
                      ],
                      "example": "INCOME"
                    },
                    "description": {
                      "type": "string",
                      "example": "Venta de productos varios"
                    },
                    "orderId": {
                      "type": "string",
                      "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                      "nullable": true
                    },
                    "clientId": {
                      "type": "string",
                      "example": "c3d4e5f6-a7b8-9012-cdef-345678901234",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "cashSession": {
                      "type": "object",
                      "description": "Información de la sesión de caja asociada",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                        },
                        "storeId": {
                          "type": "string",
                          "example": "e5f6a7b8-c9d0-1234-ef01-567890123456"
                        },
                        "userId": {
                          "type": "string",
                          "example": "f6a7b8c9-d0e1-2345-f012-678901234567"
                        },
                        "openedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "closedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        }
                      }
                    },
                    "order": {
                      "type": "object",
                      "description": "Información de la orden asociada (si aplica)",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012"
                        },
                        "orderNumber": {
                          "type": "string",
                          "example": "ORD-2025-001"
                        },
                        "totalAmount": {
                          "type": "number",
                          "example": 150.75
                        },
                        "clientId": {
                          "type": "string",
                          "example": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No tienes permisos para ver este movimiento",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para ver este movimiento"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Movimiento no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Movimiento no encontrado"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener movimiento por ID",
        "tags": [
          "Cash Movements"
        ]
      },
      "patch": {
        "description": "Actualiza los datos de un movimiento existente. Requiere rol ADMIN",
        "operationId": "CashMovementController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del movimiento a actualizar",
            "schema": {
              "example": "d4e5f6a7-b8c9-0123-def0-456789012345",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Datos del movimiento a actualizar (todos los campos son opcionales)",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCashMovementDto"
              },
              "examples": {
                "actualizar_monto": {
                  "summary": "Actualizar monto y descripción",
                  "description": "Ejemplo para corregir el monto y descripción de un movimiento",
                  "value": {
                    "amount": 120.75,
                    "description": "Venta de productos corregida"
                  }
                },
                "cambiar_tipo": {
                  "summary": "Cambiar tipo de movimiento",
                  "description": "Ejemplo para cambiar un movimiento de INCOME a EXPENSE",
                  "value": {
                    "type": "EXPENSE",
                    "description": "Gasto de oficina corregido"
                  }
                },
                "actualizar_completo": {
                  "summary": "Actualizar todos los campos",
                  "description": "Ejemplo para actualizar todos los campos posibles",
                  "value": {
                    "cashSessionId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "amount": 85,
                    "type": "INCOME",
                    "description": "Venta de accesorios",
                    "orderId": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                    "clientId": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Movimiento actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                    },
                    "cashSessionId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "amount": {
                      "type": "number",
                      "example": 120.75
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "INCOME",
                        "EXPENSE"
                      ],
                      "example": "INCOME"
                    },
                    "description": {
                      "type": "string",
                      "example": "Venta de productos corregida"
                    },
                    "orderId": {
                      "type": "string",
                      "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
                      "nullable": true
                    },
                    "clientId": {
                      "type": "string",
                      "example": "c3d4e5f6-a7b8-9012-cdef-345678901234",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Datos de entrada inválidos"
                    },
                    "details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string",
                            "example": "amount"
                          },
                          "message": {
                            "type": "string",
                            "example": "El monto debe ser un número"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Se requiere rol ADMIN",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado - Se requiere rol ADMIN"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Movimiento no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Movimiento no encontrado"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Actualizar movimiento",
        "tags": [
          "Cash Movements"
        ]
      },
      "delete": {
        "description": "Elimina un movimiento del sistema. Requiere rol ADMIN. Esta acción es irreversible.",
        "operationId": "CashMovementController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID del movimiento a eliminar",
            "schema": {
              "example": "d4e5f6a7-b8c9-0123-def0-456789012345",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Movimiento eliminado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "d4e5f6a7-b8c9-0123-def0-456789012345"
                    },
                    "cashSessionId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "amount": {
                      "type": "number",
                      "example": 100.5
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "INCOME",
                        "EXPENSE"
                      ],
                      "example": "INCOME"
                    },
                    "description": {
                      "type": "string",
                      "example": "Venta de productos varios"
                    },
                    "deletedAt": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Fecha de eliminación"
                    },
                    "message": {
                      "type": "string",
                      "example": "Movimiento eliminado exitosamente"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "message": {
                      "type": "string",
                      "example": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - Se requiere rol ADMIN",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado - Se requiere rol ADMIN"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Movimiento no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Movimiento no encontrado"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Eliminar movimiento",
        "tags": [
          "Cash Movements"
        ]
      }
    },
    "/catalog/products/create": {
      "post": {
        "description": "Crea un nuevo producto en el catálogo maestro que estará disponible para ser agregado a cualquier tienda. Este producto contiene la información básica como nombre, descripción, precios de referencia y costos.",
        "operationId": "ProductController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos del producto a crear en el catálogo maestro",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCatalogProductDto"
              },
              "examples": {
                "ejemploMotor": {
                  "summary": "Producto para automóvil",
                  "value": {
                    "name": "Aceite de Motor 10W40",
                    "description": "Aceite sintético de alta calidad para motores de gasolina y diésel",
                    "basePrice": 29.99,
                    "buyCost": 20.5
                  }
                },
                "ejemploAccesorio": {
                  "summary": "Accesorio para vehículo",
                  "value": {
                    "name": "Filtro de Aire Universal",
                    "description": "Filtro de aire de alto flujo para vehículos de pasajeros",
                    "basePrice": 15.99,
                    "buyCost": 8.75
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "El producto del catálogo ha sido creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "name": {
                      "type": "string",
                      "example": "Aceite de Motor 10W40"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true,
                      "example": "Aceite sintético de alta calidad"
                    },
                    "basePrice": {
                      "type": "number",
                      "nullable": true,
                      "example": 29.99
                    },
                    "buyCost": {
                      "type": "number",
                      "nullable": true,
                      "example": 20.5
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdById": {
                      "type": "string",
                      "nullable": true,
                      "example": "user-id-123"
                    },
                    "createdBy": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o producto duplicado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "El nombre del producto ya está en uso",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para crear productos"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Crear un nuevo producto en el catálogo maestro",
        "tags": [
          "Catálogo de Productos"
        ]
      }
    },
    "/catalog/products/all": {
      "get": {
        "description": "Retorna una lista completa de todos los productos registrados en el catálogo maestro, ordenados por fecha de creación descendente. Incluye información del usuario que creó cada producto.",
        "operationId": "ProductController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de productos del catálogo obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                      },
                      "name": {
                        "type": "string",
                        "example": "Aceite de Motor 10W40"
                      },
                      "description": {
                        "type": "string",
                        "nullable": true,
                        "example": "Aceite sintético de alta calidad"
                      },
                      "basePrice": {
                        "type": "number",
                        "nullable": true,
                        "example": 29.99
                      },
                      "buyCost": {
                        "type": "number",
                        "nullable": true,
                        "example": 20.5
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "createdById": {
                        "type": "string",
                        "nullable": true,
                        "example": "user-id-123"
                      },
                      "createdBy": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Juan Pérez"
                          },
                          "email": {
                            "type": "string",
                            "example": "juan@ejemplo.com"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para ver productos"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener todos los productos del catálogo",
        "tags": [
          "Catálogo de Productos"
        ]
      }
    },
    "/catalog/products/findOne/{id}": {
      "get": {
        "description": "Retorna la información detallada de un producto específico del catálogo maestro usando su UUID. Incluye información del usuario que lo creó.",
        "operationId": "ProductController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto a consultar",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto del catálogo encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "name": {
                      "type": "string",
                      "example": "Aceite de Motor 10W40"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true,
                      "example": "Aceite sintético de alta calidad"
                    },
                    "basePrice": {
                      "type": "number",
                      "nullable": true,
                      "example": 29.99
                    },
                    "buyCost": {
                      "type": "number",
                      "nullable": true,
                      "example": 20.5
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdById": {
                      "type": "string",
                      "nullable": true,
                      "example": "user-id-123"
                    },
                    "createdBy": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID del producto inválido - debe ser un UUID válido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para ver productos"
          },
          "404": {
            "description": "Producto del catálogo no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto del catálogo con ID 123e4567-e89b-12d3-a456-426614174000 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener un producto del catálogo por ID",
        "tags": [
          "Catálogo de Productos"
        ]
      }
    },
    "/catalog/products/update/{id}": {
      "patch": {
        "description": "Actualiza la información de un producto existente en el catálogo maestro. Solo los administradores pueden realizar esta operación. Los cambios afectan al producto base pero no a los inventarios existentes en las tiendas.",
        "operationId": "ProductController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto a actualizar",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Datos del producto a actualizar",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProductDto"
              },
              "examples": {
                "actualizarNombre": {
                  "summary": "Actualizar nombre y descripción",
                  "value": {
                    "name": "Aceite de Motor 10W40 Premium",
                    "description": "Aceite sintético de alta calidad con aditivos de protección"
                  }
                },
                "actualizarPrecios": {
                  "summary": "Actualizar precios de referencia",
                  "value": {
                    "basePrice": 32.99,
                    "buyCost": 22.75
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Producto del catálogo actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "name": {
                      "type": "string",
                      "example": "Aceite de Motor 10W40 Premium"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true,
                      "example": "Aceite sintético con aditivos"
                    },
                    "basePrice": {
                      "type": "number",
                      "nullable": true,
                      "example": 32.99
                    },
                    "buyCost": {
                      "type": "number",
                      "nullable": true,
                      "example": 22.75
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdById": {
                      "type": "string",
                      "nullable": true,
                      "example": "user-id-123"
                    },
                    "createdBy": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o ID de producto inválido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos de administrador para actualizar productos"
          },
          "404": {
            "description": "Producto del catálogo no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto del catálogo con ID 123e4567-e89b-12d3-a456-426614174000 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Actualizar un producto del catálogo",
        "tags": [
          "Catálogo de Productos"
        ]
      }
    },
    "/catalog/products/remove/{id}": {
      "delete": {
        "description": "Marca un producto del catálogo como eliminado (soft delete). Esta operación solo puede realizarla un administrador. El producto no se elimina físicamente, solo se marca como eliminado y ya no aparecerá en las consultas normales.",
        "operationId": "ProductController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto a marcar como eliminado",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto del catálogo marcado como eliminado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "name": {
                      "type": "string",
                      "example": "Aceite de Motor 10W40"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true,
                      "example": "Aceite sintético de alta calidad"
                    },
                    "basePrice": {
                      "type": "number",
                      "nullable": true,
                      "example": 29.99
                    },
                    "buyCost": {
                      "type": "number",
                      "nullable": true,
                      "example": 20.5
                    },
                    "isDeleted": {
                      "type": "boolean",
                      "example": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdById": {
                      "type": "string",
                      "nullable": true,
                      "example": "user-id-123"
                    },
                    "createdBy": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID del producto inválido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos de administrador para eliminar productos"
          },
          "404": {
            "description": "Producto del catálogo no encontrado o ya está eliminado",
            "content": {
              "application/json": {
                "schema": {
                  "examples": {
                    "noEncontrado": {
                      "summary": "Producto no encontrado",
                      "value": {
                        "statusCode": 404,
                        "message": "Producto del catálogo con ID 123e4567-e89b-12d3-a456-426614174000 no encontrado",
                        "error": "Not Found"
                      }
                    },
                    "yaEliminado": {
                      "summary": "Producto ya eliminado",
                      "value": {
                        "statusCode": 404,
                        "message": "Producto del catálogo con ID 123e4567-e89b-12d3-a456-426614174000 ya está eliminado",
                        "error": "Not Found"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Eliminar un producto del catálogo (Soft Delete)",
        "tags": [
          "Catálogo de Productos"
        ]
      }
    },
    "/store/products/create": {
      "post": {
        "description": "Agrega un producto al inventario de todas las tiendas del sistema. La tienda especificada recibirá el producto con el precio y stock indicados, mientras que las demás tiendas recibirán el mismo producto con precio=0 y stock=0. Puede usar un producto existente del catálogo o crear uno nuevo. Requiere que el usuario tenga acceso a la tienda especificada.",
        "operationId": "StoreProductController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos para agregar producto a tienda (existente o nuevo)",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStoreProductDto"
              },
              "examples": {
                "productoExistente": {
                  "summary": "Agregar producto existente del catálogo",
                  "description": "Usa un producto que ya existe en el catálogo maestro",
                  "value": {
                    "productId": "123e4567-e89b-12d3-a456-426614174000",
                    "createNewProduct": false,
                    "storeId": "456e7890-e12b-34d5-a678-426614174000",
                    "price": 29.99,
                    "stock": 50,
                    "stockThreshold": 5
                  }
                },
                "productoNuevo": {
                  "summary": "Crear nuevo producto y agregar a tienda",
                  "description": "Crea un nuevo producto en el catálogo y lo agrega directamente a la tienda",
                  "value": {
                    "createNewProduct": true,
                    "name": "Filtro de Aceite Premium",
                    "description": "Filtro de aceite de alta eficiencia para vehículos modernos",
                    "basePrice": 15.99,
                    "buyCost": 8.75,
                    "storeId": "456e7890-e12b-34d5-a678-426614174000",
                    "price": 18.99,
                    "stock": 25,
                    "stockThreshold": 3
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Producto agregado a todas las tiendas exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "store-product-id-123"
                      },
                      "price": {
                        "type": "number",
                        "example": 29.99
                      },
                      "stock": {
                        "type": "number",
                        "example": 50
                      },
                      "stockThreshold": {
                        "type": "number",
                        "example": 5
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "productId": {
                        "type": "string",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                      },
                      "product": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Aceite de Motor 10W40"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "basePrice": {
                            "type": "number",
                            "nullable": true
                          },
                          "buyCost": {
                            "type": "number",
                            "nullable": true
                          }
                        }
                      },
                      "storeId": {
                        "type": "string",
                        "example": "456e7890-e12b-34d5-a678-426614174000"
                      },
                      "store": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Tecnicentro JR - Sucursal Central"
                          },
                          "address": {
                            "type": "string",
                            "nullable": true
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      },
                      "userId": {
                        "type": "string",
                        "example": "user-id-123"
                      },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Juan Pérez"
                          },
                          "email": {
                            "type": "string",
                            "example": "juan@ejemplo.com"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o producto ya existe en todas las tiendas",
            "content": {
              "application/json": {
                "schema": {
                  "examples": {
                    "productoExistenteTodasTiendas": {
                      "summary": "Producto ya existe en todas las tiendas",
                      "value": {
                        "statusCode": 403,
                        "message": "Este producto ya está registrado en todas las tiendas",
                        "error": "Forbidden"
                      }
                    },
                    "datosInvalidos": {
                      "summary": "Datos inválidos",
                      "value": {
                        "statusCode": 400,
                        "message": "El productId debe ser un UUID válido",
                        "error": "Bad Request"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 401,
                    "message": "Unauthorized",
                    "error": "Unauthorized"
                  }
                }
              }
            }
          },
          "403": {
            "description": "No tienes permisos para agregar productos a esta tienda"
          },
          "404": {
            "description": "Producto del catálogo o tienda no encontrados",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto del catálogo con ID 123e4567-e89b-12d3-a456-426614174000 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Agregar producto a todas las tiendas",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/my-products": {
      "get": {
        "description": "Retorna una lista de todos los productos que el usuario autenticado ha agregado a las tiendas donde tiene acceso. Incluye información completa del producto del catálogo y de la tienda.",
        "operationId": "StoreProductController_findMyProducts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de productos del usuario obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "store-product-id-123"
                      },
                      "price": {
                        "type": "number",
                        "example": 29.99
                      },
                      "stock": {
                        "type": "number",
                        "example": 50
                      },
                      "stockThreshold": {
                        "type": "number",
                        "example": 5
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "productId": {
                        "type": "string",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                      },
                      "product": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Aceite de Motor 10W40"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "basePrice": {
                            "type": "number",
                            "nullable": true
                          },
                          "buyCost": {
                            "type": "number",
                            "nullable": true
                          }
                        }
                      },
                      "storeId": {
                        "type": "string",
                        "example": "456e7890-e12b-34d5-a678-426614174000"
                      },
                      "store": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Tecnicentro JR - Sucursal Central"
                          },
                          "address": {
                            "type": "string",
                            "nullable": true
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      },
                      "userId": {
                        "type": "string",
                        "example": "user-id-123"
                      },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "Juan Pérez"
                          },
                          "email": {
                            "type": "string",
                            "example": "juan@ejemplo.com"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para ver productos"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener los productos del usuario autenticado en sus tiendas",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/store/{storeId}": {
      "get": {
        "description": "Retorna una lista paginada de todos los productos disponibles en el inventario de una tienda específica. Incluye información del producto del catálogo y datos específicos de la tienda como precio y stock. Soporta búsqueda por nombre de producto.",
        "operationId": "StoreProductController_findByStore",
        "parameters": [
          {
            "name": "storeId",
            "required": true,
            "in": "path",
            "description": "UUID de la tienda a consultar",
            "schema": {
              "example": "456e7890-e12b-34d5-a678-426614174000",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Número de página (default: 1)",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Cantidad de resultados por página (default: 20)",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Buscar productos por nombre",
            "schema": {
              "example": "aceite",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos de la tienda obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "store-product-id-123"
                          },
                          "price": {
                            "type": "number",
                            "example": 29.99
                          },
                          "stock": {
                            "type": "number",
                            "example": 50
                          },
                          "stockThreshold": {
                            "type": "number",
                            "example": 5
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "productId": {
                            "type": "string",
                            "example": "123e4567-e89b-12d3-a456-426614174000"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string",
                                "example": "Aceite de Motor 10W40"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "basePrice": {
                                "type": "number",
                                "nullable": true
                              },
                              "buyCost": {
                                "type": "number",
                                "nullable": true
                              }
                            }
                          },
                          "storeId": {
                            "type": "string",
                            "example": "456e7890-e12b-34d5-a678-426614174000"
                          },
                          "store": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string",
                                "example": "Tecnicentro JR - Sucursal Central"
                              },
                              "address": {
                                "type": "string",
                                "nullable": true
                              },
                              "phone": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          },
                          "userId": {
                            "type": "string",
                            "example": "user-id-123"
                          },
                          "user": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string",
                                "example": "Juan Pérez"
                              },
                              "email": {
                                "type": "string",
                                "example": "juan@ejemplo.com"
                              }
                            }
                          }
                        }
                      }
                    },
                    "total": {
                      "type": "number",
                      "example": 45,
                      "description": "Total de productos"
                    },
                    "page": {
                      "type": "number",
                      "example": 1,
                      "description": "Página actual"
                    },
                    "limit": {
                      "type": "number",
                      "example": 20,
                      "description": "Resultados por página"
                    },
                    "totalPages": {
                      "type": "number",
                      "example": 3,
                      "description": "Total de páginas"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID de tienda inválido - debe ser un UUID válido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para ver productos de esta tienda"
          },
          "404": {
            "description": "Tienda no encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Tienda con ID 456e7890-e12b-34d5-a678-426614174000 no encontrada",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener todos los productos de una tienda específica",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/{id}/stock": {
      "patch": {
        "description": "Actualiza únicamente el stock de un producto específico en una tienda. Permite reabastecer inventario rápidamente. Requiere permisos de administrador o ser el propietario del producto.",
        "operationId": "StoreProductController_updateStock",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto en tienda a actualizar stock",
            "schema": {
              "example": "store-product-id-123",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Nuevo stock del producto",
          "content": {
            "application/json": {
              "schema": {
                "type": "string"
              },
              "examples": {
                "reabastecer": {
                  "summary": "Reabastecer inventario",
                  "value": {
                    "stock": 100
                  }
                },
                "reducirStock": {
                  "summary": "Reducir stock por venta",
                  "value": {
                    "stock": 25
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stock actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "store-product-id-123"
                    },
                    "price": {
                      "type": "number",
                      "example": 29.99
                    },
                    "stock": {
                      "type": "number",
                      "example": 100
                    },
                    "stockThreshold": {
                      "type": "number",
                      "example": 5
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "productId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Aceite de Motor 10W40"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true
                        },
                        "buyCost": {
                          "type": "number",
                          "nullable": true
                        }
                      }
                    },
                    "storeId": {
                      "type": "string",
                      "example": "456e7890-e12b-34d5-a678-426614174000"
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Tecnicentro JR - Sucursal Central"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      }
                    },
                    "userId": {
                      "type": "string",
                      "example": "user-id-123"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o stock negativo",
            "content": {
              "application/json": {
                "schema": {
                  "examples": {
                    "stockNegativo": {
                      "summary": "Stock negativo no permitido",
                      "value": {
                        "statusCode": 400,
                        "message": "El stock no puede ser negativo",
                        "error": "Bad Request"
                      }
                    },
                    "datosInvalidos": {
                      "summary": "Datos inválidos",
                      "value": {
                        "statusCode": 400,
                        "message": "El stock debe ser un número válido",
                        "error": "Bad Request"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para actualizar este producto",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "No tienes permisos para actualizar este producto",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Producto en tienda no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto en tienda con ID store-product-id-123 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Actualizar stock de un producto en tienda",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/findOne/{id}": {
      "get": {
        "description": "Retorna la información detallada de un producto específico en una tienda usando su UUID. Incluye información completa del producto del catálogo, datos de la tienda y del usuario responsable.",
        "operationId": "StoreProductController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto en tienda a consultar",
            "schema": {
              "example": "store-product-id-123",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto en tienda encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "store-product-id-123"
                    },
                    "price": {
                      "type": "number",
                      "example": 29.99
                    },
                    "stock": {
                      "type": "number",
                      "example": 50
                    },
                    "stockThreshold": {
                      "type": "number",
                      "example": 5
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "productId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Aceite de Motor 10W40"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true
                        },
                        "buyCost": {
                          "type": "number",
                          "nullable": true
                        }
                      }
                    },
                    "storeId": {
                      "type": "string",
                      "example": "456e7890-e12b-34d5-a678-426614174000"
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Tecnicentro JR - Sucursal Central"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      }
                    },
                    "userId": {
                      "type": "string",
                      "example": "user-id-123"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID del producto en tienda inválido - debe ser un UUID válido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos para ver este producto"
          },
          "404": {
            "description": "Producto en tienda no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto en tienda con ID store-product-id-123 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener un producto en tienda por ID",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/update/{id}": {
      "patch": {
        "description": "Actualiza la información de un producto existente en una tienda. Los usuarios pueden actualizar sus propios productos (solo campos de tienda) y los administradores pueden actualizar cualquier producto (incluyendo campos del catálogo). **Permisos:**\n\n**Usuarios (USER):** Solo pueden modificar:\n- price: Precio de venta en la tienda\n- stock: Cantidad en inventario\n- stockThreshold: Umbral de alerta\n\n**Administradores (ADMIN):** Pueden modificar todo lo anterior más:\n- name: Nombre del producto (catálogo)\n- description: Descripción del producto (catálogo)\n- buyCost: Costo de compra (catálogo)\n- basePrice: Precio base de referencia (catálogo)",
        "operationId": "StoreProductController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto en tienda a actualizar",
            "schema": {
              "example": "store-product-id-123",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Datos del producto en tienda a actualizar",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStoreProductDto"
              },
              "examples": {
                "usuarioNormal": {
                  "summary": "Usuario actualizando campos de tienda",
                  "description": "Un usuario normal solo puede modificar precio, stock y umbral de alerta",
                  "value": {
                    "price": 32.99,
                    "stock": 75,
                    "stockThreshold": 10
                  }
                },
                "administradorTienda": {
                  "summary": "Administrador actualizando campos de tienda",
                  "description": "Un administrador puede modificar los campos de la tienda",
                  "value": {
                    "price": 35.99,
                    "stock": 100,
                    "stockThreshold": 15
                  }
                },
                "administradorCatalogo": {
                  "summary": "Administrador actualizando catálogo y tienda",
                  "description": "Un administrador puede modificar tanto el catálogo como los campos de la tienda",
                  "value": {
                    "name": "Aceite de Motor 10W40 Premium",
                    "description": "Aceite sintético de alta calidad con aditivos de protección",
                    "buyCost": 22.75,
                    "basePrice": 32.99,
                    "price": 35.99,
                    "stock": 100,
                    "stockThreshold": 15
                  }
                },
                "soloCatalogo": {
                  "summary": "Administrador actualizando solo catálogo",
                  "description": "Un administrador puede modificar solo los campos del catálogo",
                  "value": {
                    "name": "Filtro de Aceite Premium Plus",
                    "description": "Filtro de aceite de mayor duración y eficiencia",
                    "buyCost": 12.5,
                    "basePrice": 18.99
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Producto en tienda actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "store-product-id-123"
                    },
                    "price": {
                      "type": "number",
                      "example": 32.99
                    },
                    "stock": {
                      "type": "number",
                      "example": 75
                    },
                    "stockThreshold": {
                      "type": "number",
                      "example": 10
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "productId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Aceite de Motor 10W40"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true
                        },
                        "buyCost": {
                          "type": "number",
                          "nullable": true
                        }
                      }
                    },
                    "storeId": {
                      "type": "string",
                      "example": "456e7890-e12b-34d5-a678-426614174000"
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Tecnicentro JR - Sucursal Central"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      }
                    },
                    "userId": {
                      "type": "string",
                      "example": "user-id-123"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Juan Pérez"
                        },
                        "email": {
                          "type": "string",
                          "example": "juan@ejemplo.com"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o ID de producto inválido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos de administrador o no es el propietario del producto",
            "content": {
              "application/json": {
                "schema": {
                  "examples": {
                    "noPropietario": {
                      "summary": "Usuario no es propietario del producto",
                      "value": {
                        "statusCode": 403,
                        "message": "No tienes permiso para actualizar este producto",
                        "error": "Forbidden"
                      }
                    },
                    "camposAdmin": {
                      "summary": "Usuario intentando modificar campos de administrador",
                      "value": {
                        "statusCode": 403,
                        "message": "Solo los administradores pueden modificar los campos: name, description",
                        "error": "Forbidden"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Producto en tienda no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto en tienda con ID store-product-id-123 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Actualizar un producto en tienda",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/store/products/remove/{id}": {
      "delete": {
        "description": "Elimina permanentemente un producto del inventario de una tienda. Los usuarios pueden eliminar sus propios productos y los administradores pueden eliminar cualquier producto. **ADVERTENCIA**: Si existen órdenes que referencian este producto en tienda, estas referencias se volverán inválidas.",
        "operationId": "StoreProductController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID del producto en tienda a eliminar",
            "schema": {
              "example": "store-product-id-123",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Producto en tienda eliminado exitosamente (sin contenido en respuesta)"
          },
          "400": {
            "description": "ID del producto en tienda inválido"
          },
          "401": {
            "description": "No autorizado - Token JWT inválido o ausente"
          },
          "403": {
            "description": "No tiene permisos de administrador o no es el propietario del producto",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "No tienes permiso para eliminar este producto",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Producto en tienda no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Producto en tienda con ID store-product-id-123 no encontrado",
                    "error": "Not Found"
                  }
                }
              }
            }
          },
          "409": {
            "description": "No se puede eliminar el producto porque está siendo utilizado en órdenes",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 409,
                    "message": "No se puede eliminar el producto porque existen órdenes asociadas",
                    "error": "Conflict"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Eliminar un producto de una tienda",
        "tags": [
          "Productos en Tienda"
        ]
      }
    },
    "/services/create": {
      "post": {
        "description": "Permite a usuarios ADMIN y USER registrar un nuevo servicio en el sistema. Se pueden adjuntar imágenes opcionales del servicio. Las imágenes se suben automáticamente a Supabase Storage y se generan URLs firmadas con validez de 1 año.",
        "operationId": "ServiceController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos del servicio a crear. El campo `file` es opcional y permite subir hasta 5 imágenes.",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "type",
                  "status",
                  "name",
                  "price",
                  "orderId"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "REPAIR",
                      "WARRANTY"
                    ],
                    "description": "Tipo de servicio a realizar",
                    "example": "REPAIR"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "IN_PROGRESS",
                      "COMPLETED",
                      "DELIVERED",
                      "PAID",
                      "ANNULLATED"
                    ],
                    "description": "Estado inicial del servicio",
                    "example": "IN_PROGRESS"
                  },
                  "name": {
                    "type": "string",
                    "description": "Nombre descriptivo del servicio",
                    "example": "Reparación completa del motor",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string",
                    "description": "Descripción detallada del trabajo a realizar",
                    "example": "Revisión completa del motor, cambio de aceite y filtros",
                    "maxLength": 1000
                  },
                  "price": {
                    "type": "number",
                    "description": "Costo del servicio en USD",
                    "example": 250,
                    "minimum": 0
                  },
                  "orderId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID de la orden a la que pertenece este servicio",
                    "example": "123e4567-e89b-12d3-a456-426614174000"
                  },
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen (jpg, jpeg, png, gif) - Máximo 5MB por archivo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Servicio creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "REPAIR",
                        "WARRANTY"
                      ],
                      "example": "REPAIR"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "IN_PROGRESS",
                        "COMPLETED",
                        "DELIVERED",
                        "PAID",
                        "ANNULLATED"
                      ],
                      "example": "IN_PROGRESS"
                    },
                    "name": {
                      "type": "string",
                      "example": "Reparación completa del motor"
                    },
                    "description": {
                      "type": "string",
                      "example": "Revisión completa del motor, cambio de aceite y filtros"
                    },
                    "photoUrls": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "https://supabase-url.com/photo1.jpg"
                      ]
                    },
                    "price": {
                      "type": "number",
                      "example": 250
                    },
                    "orderId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos o faltantes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "El tipo de servicio es requerido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "No tiene permisos para realizar esta acción",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Forbidden resource"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Error al procesar los archivos adjuntos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 422
                    },
                    "message": {
                      "type": "string",
                      "example": "Solo se permiten imágenes (jpg, jpeg, png, gif)"
                    },
                    "error": {
                      "type": "string",
                      "example": "Unprocessable Entity"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Crear un nuevo servicio",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/findAll": {
      "get": {
        "description": "Obtiene una lista de servicios registrados en el sistema. Permite filtrar por estado y tipo de servicio. Los usuarios ADMIN pueden ver todos los servicios, mientras que los USER solo pueden ver los servicios de sus órdenes.",
        "operationId": "ServiceController_findAll",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filtrar servicios por estado actual",
            "schema": {
              "enum": [
                "IN_PROGRESS",
                "COMPLETED",
                "DELIVERED",
                "PAID",
                "ANNULLATED"
              ],
              "default": null,
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filtrar servicios por tipo de servicio",
            "schema": {
              "enum": [
                "REPAIR",
                "WARRANTY"
              ],
              "default": null,
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de servicios obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid",
                        "example": "123e4567-e89b-12d3-a456-426614174001"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "REPAIR",
                          "WARRANTY"
                        ],
                        "example": "REPAIR"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "IN_PROGRESS",
                          "COMPLETED",
                          "DELIVERED",
                          "PAID",
                          "ANNULLATED"
                        ],
                        "example": "IN_PROGRESS"
                      },
                      "name": {
                        "type": "string",
                        "example": "Reparación completa del motor"
                      },
                      "description": {
                        "type": "string",
                        "example": "Revisión completa del motor"
                      },
                      "photoUrls": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "https://supabase-url.com/photo1.jpg"
                        ]
                      },
                      "price": {
                        "type": "number",
                        "example": 250
                      },
                      "orderId": {
                        "type": "string",
                        "format": "uuid",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parámetros de filtrado inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Valor de estado no válido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener lista de servicios",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/findOne/{id}": {
      "get": {
        "description": "Obtiene los detalles completos de un servicio específico mediante su ID. Los usuarios ADMIN pueden ver cualquier servicio, mientras que los USER solo pueden ver servicios de sus órdenes.",
        "operationId": "ServiceController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del servicio (UUID v4)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Servicio encontrado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "REPAIR",
                        "WARRANTY"
                      ],
                      "example": "REPAIR"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "IN_PROGRESS",
                        "COMPLETED",
                        "DELIVERED",
                        "PAID",
                        "ANNULLATED"
                      ],
                      "example": "IN_PROGRESS"
                    },
                    "name": {
                      "type": "string",
                      "example": "Reparación completa del motor"
                    },
                    "description": {
                      "type": "string",
                      "example": "Revisión completa del motor, cambio de aceite y filtros"
                    },
                    "photoUrls": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "https://supabase-url.com/photo1.jpg",
                        "https://supabase-url.com/photo2.jpg"
                      ]
                    },
                    "price": {
                      "type": "number",
                      "example": 250
                    },
                    "orderId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-12-01T10:30:00.000Z"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-12-01T15:45:00.000Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Formato de ID inválido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed (uuid is expected)"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "No se encontró ningún servicio con el ID proporcionado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Servicio con ID \"123e4567-e89b-12d3-a456-426614174001\" no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener servicio por ID",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/update/{id}": {
      "patch": {
        "description": "Actualiza los datos de un servicio existente. Solo actualiza los campos proporcionados en el body. Los usuarios ADMIN pueden actualizar cualquier servicio, mientras que los USER solo pueden actualizar servicios de sus órdenes.",
        "operationId": "ServiceController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del servicio a actualizar (UUID v4)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Campos del servicio a actualizar. Todos los campos son opcionales.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateServiceDto"
              },
              "examples": {
                "actualizarEstado": {
                  "summary": "Actualizar estado del servicio",
                  "description": "Cambia el estado del servicio a COMPLETED",
                  "value": {
                    "status": "COMPLETED"
                  }
                },
                "actualizarPrecio": {
                  "summary": "Actualizar precio del servicio",
                  "description": "Modifica el costo del servicio",
                  "value": {
                    "price": 300
                  }
                },
                "actualizarCompleto": {
                  "summary": "Actualizar múltiples campos",
                  "description": "Actualiza nombre, descripción y precio",
                  "value": {
                    "name": "Reparación completa del motor con filtros",
                    "description": "Revisión completa del motor, cambio de aceite, filtros y bujías",
                    "price": 350
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Servicio actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "REPAIR",
                        "WARRANTY"
                      ],
                      "example": "REPAIR"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "IN_PROGRESS",
                        "COMPLETED",
                        "DELIVERED",
                        "PAID",
                        "ANNULLATED"
                      ],
                      "example": "COMPLETED"
                    },
                    "name": {
                      "type": "string",
                      "example": "Reparación completa del motor con filtros"
                    },
                    "description": {
                      "type": "string",
                      "example": "Revisión completa del motor, cambio de aceite, filtros y bujías"
                    },
                    "photoUrls": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "https://supabase-url.com/photo1.jpg"
                      ]
                    },
                    "price": {
                      "type": "number",
                      "example": 350
                    },
                    "orderId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "El precio debe ser un número positivo"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "No tiene permisos para realizar esta acción",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para actualizar este servicio"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontró el servicio especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Servicio con ID \"123e4567-e89b-12d3-a456-426614174001\" no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Actualizar un servicio",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/status/{id}": {
      "patch": {
        "description": "Actualiza específicamente el estado de un servicio. Los usuarios ADMIN pueden cambiar el estado de cualquier servicio, mientras que los USER solo pueden cambiar el estado de servicios de sus órdenes. Este endpoint está diseñado para transiciones de estado simples y rápidas.",
        "operationId": "ServiceController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del servicio a actualizar (UUID v4)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Nuevo estado del servicio",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "IN_PROGRESS",
                      "COMPLETED",
                      "DELIVERED",
                      "PAID",
                      "ANNULLATED"
                    ],
                    "description": "Nuevo estado del servicio",
                    "examples": {
                      "en_progreso": {
                        "value": "IN_PROGRESS",
                        "summary": "En progreso"
                      },
                      "completado": {
                        "value": "COMPLETED",
                        "summary": "Completado"
                      },
                      "entregado": {
                        "value": "DELIVERED",
                        "summary": "Entregado"
                      },
                      "pagado": {
                        "value": "PAID",
                        "summary": "Pagado"
                      },
                      "anulado": {
                        "value": "ANNULLATED",
                        "summary": "Anulado"
                      }
                    }
                  }
                }
              },
              "examples": {
                "cambiarACompletado": {
                  "summary": "Marcar servicio como completado",
                  "description": "Cambia el estado del servicio a COMPLETED cuando el trabajo ha finalizado",
                  "value": {
                    "status": "COMPLETED"
                  }
                },
                "cambiarAEntregado": {
                  "summary": "Marcar servicio como entregado",
                  "description": "Cambia el estado del servicio a DELIVERED cuando se ha entregado al cliente",
                  "value": {
                    "status": "DELIVERED"
                  }
                },
                "cambiarAPagado": {
                  "summary": "Marcar servicio como pagado",
                  "description": "Cambia el estado del servicio a PAID cuando se ha realizado el pago",
                  "value": {
                    "status": "PAID"
                  }
                },
                "cambiarAnulado": {
                  "summary": "Anular servicio",
                  "description": "Cambia el estado del servicio a ANNULLATED cuando se cancela el servicio",
                  "value": {
                    "status": "ANNULLATED"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estado del servicio actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "REPAIR",
                        "WARRANTY"
                      ],
                      "example": "REPAIR"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "IN_PROGRESS",
                        "COMPLETED",
                        "DELIVERED",
                        "PAID",
                        "ANNULLATED"
                      ],
                      "example": "COMPLETED"
                    },
                    "name": {
                      "type": "string",
                      "example": "Reparación completa del motor"
                    },
                    "description": {
                      "type": "string",
                      "example": "Revisión completa del motor, cambio de aceite y filtros"
                    },
                    "photoUrls": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "https://supabase-url.com/photo1.jpg"
                      ]
                    },
                    "price": {
                      "type": "number",
                      "example": 250
                    },
                    "orderId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Estado no válido o datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Estado no válido. Los estados permitidos son: IN_PROGRESS, COMPLETED, DELIVERED, PAID, ANNULLATED"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "No tiene permisos para realizar esta acción",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para cambiar el estado de este servicio"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontró el servicio especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Servicio con ID \"123e4567-e89b-12d3-a456-426614174001\" no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Cambiar estado de un servicio",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/remove/{id}": {
      "delete": {
        "description": "Elimina permanentemente un servicio del sistema. Esta acción solo puede ser realizada por usuarios con rol ADMIN. La eliminación es irreversible y también eliminará las imágenes asociadas en Supabase Storage.",
        "operationId": "ServiceController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del servicio a eliminar (UUID v4)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Servicio eliminado exitosamente. No retorna contenido en el body."
          },
          "400": {
            "description": "Formato de ID inválido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed (uuid is expected)"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "No tiene permisos para realizar esta acción. Solo ADMIN puede eliminar servicios.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "Forbidden resource"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontró el servicio especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Servicio con ID \"123e4567-e89b-12d3-a456-426614174001\" no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "No se puede eliminar el servicio porque tiene registros asociados",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 409
                    },
                    "message": {
                      "type": "string",
                      "example": "No se puede eliminar el servicio porque está asociado a una orden activa"
                    },
                    "error": {
                      "type": "string",
                      "example": "Conflict"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Eliminar un servicio",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/{id}/pending-payment": {
      "get": {
        "description": "Calcula el monto restante por pagar de un servicio específico. Revisa todos los pagos registrados para el servicio y resta el total del precio del servicio. Disponible para usuarios ADMIN y USER.",
        "operationId": "ServiceController_getPendingPayment",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID único del servicio (UUID v4)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Monto pendiente calculado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "serviceId": {
                      "type": "string",
                      "format": "uuid",
                      "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "serviceName": {
                      "type": "string",
                      "example": "Reparación de motor"
                    },
                    "servicePrice": {
                      "type": "number",
                      "example": 350
                    },
                    "totalPaid": {
                      "type": "number",
                      "example": 120
                    },
                    "pendingAmount": {
                      "type": "number",
                      "example": 230
                    },
                    "isFullyPaid": {
                      "type": "boolean",
                      "example": false
                    },
                    "paymentBreakdown": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "pay-123-456"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "EFECTIVO",
                              "TARJETA",
                              "TRANSFERENCIA",
                              "YAPE",
                              "PLIN",
                              "OTRO"
                            ],
                            "example": "EFECTIVO"
                          },
                          "amount": {
                            "type": "number",
                            "example": 120
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00Z"
                          }
                        }
                      },
                      "description": "Lista de pagos realizados para este servicio"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Formato de ID inválido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Validation failed (uuid is expected)"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "No tiene permisos para realizar esta acción",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No tienes permisos para ver el estado de pago de este servicio"
                    },
                    "error": {
                      "type": "string",
                      "example": "Forbidden"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontró el servicio especificado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Servicio con ID \"123e4567-e89b-12d3-a456-426614174001\" no encontrado"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener monto pendiente de pago de un servicio",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/services/findAllWithClients": {
      "get": {
        "description": "Obtiene una lista de servicios con información adicional de clientes y órdenes. Permite filtrar por estado, tipo de servicio y tienda. Los usuarios ADMIN pueden ver todos los servicios, mientras que los USER solo pueden ver los servicios de sus órdenes.",
        "operationId": "ServiceController_findAllWithClients",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filtrar servicios por estado actual",
            "schema": {
              "enum": [
                "IN_PROGRESS",
                "COMPLETED",
                "DELIVERED",
                "PAID",
                "ANNULLATED"
              ],
              "default": null,
              "type": "string"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filtrar servicios por tipo de servicio",
            "schema": {
              "enum": [
                "REPAIR",
                "WARRANTY"
              ],
              "default": null,
              "type": "string"
            }
          },
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Filtrar servicios por tienda específica",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de servicios con clientes obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid",
                        "example": "123e4567-e89b-12d3-a456-426614174001"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "REPAIR",
                          "WARRANTY"
                        ],
                        "example": "REPAIR"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "IN_PROGRESS",
                          "COMPLETED",
                          "DELIVERED",
                          "PAID",
                          "ANNULLATED"
                        ],
                        "example": "IN_PROGRESS"
                      },
                      "name": {
                        "type": "string",
                        "example": "Reparación completa del motor"
                      },
                      "description": {
                        "type": "string",
                        "example": "Revisión completa del motor"
                      },
                      "photoUrls": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "https://supabase-url.com/photo1.jpg"
                        ]
                      },
                      "price": {
                        "type": "number",
                        "example": 250
                      },
                      "orderId": {
                        "type": "string",
                        "format": "uuid",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "client": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "client-123"
                          },
                          "name": {
                            "type": "string",
                            "example": "Juan Pérez"
                          },
                          "email": {
                            "type": "string",
                            "example": "juan@ejemplo.com"
                          },
                          "phone": {
                            "type": "string",
                            "example": "+1234567890"
                          },
                          "address": {
                            "type": "string",
                            "example": "Av. Principal 123"
                          }
                        }
                      },
                      "order": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000"
                          },
                          "clientId": {
                            "type": "string",
                            "format": "uuid",
                            "example": "client-123"
                          },
                          "totalAmount": {
                            "type": "number",
                            "example": 500
                          },
                          "status": {
                            "type": "string",
                            "example": "PENDING"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parámetros de filtrado inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Valor de estado no válido"
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener servicios con información de clientes",
        "tags": [
          "Servicios"
        ]
      }
    },
    "/images/upload": {
      "post": {
        "description": "Sube una imagen al bucket de Supabase",
        "operationId": "ImageController_uploadImage",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Archivo de imagen a subir",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen (JPEG, PNG, WebP) con tamaño máximo de 5MB"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Imagen subida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "url": {
                      "type": "string",
                      "example": "https://example.com/image.jpg"
                    },
                    "path": {
                      "type": "string",
                      "example": "folder/filename.jpg"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error al subir la imagen",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "summary": "Subir una imagen",
        "tags": [
          "images"
        ]
      }
    },
    "/images": {
      "post": {
        "operationId": "ImageController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateImageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "images"
        ]
      },
      "get": {
        "operationId": "ImageController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "images"
        ]
      }
    },
    "/images/{id}": {
      "get": {
        "operationId": "ImageController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "images"
        ]
      },
      "patch": {
        "operationId": "ImageController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateImageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "images"
        ]
      },
      "delete": {
        "operationId": "ImageController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "tags": [
          "images"
        ]
      }
    },
    "/maintenance/status": {
      "get": {
        "operationId": "MaintenanceController_getMaintenanceStatus",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Maintenance"
        ]
      }
    },
    "/store": {
      "post": {
        "description": "Crea una nueva tienda en el sistema. Requiere autenticación JWT con rol ADMIN y credenciales válidas del administrador (email y password).",
        "operationId": "StoreController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos de la tienda y credenciales del administrador",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStoreDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "name": "Tienda Principal",
                    "address": "Av. Principal 123",
                    "phone": "+123456789",
                    "adminEmail": "admin@ejemplo.com",
                    "adminPassword": "contraseñaSegura123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tienda creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tienda creada exitosamente"
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "address": {
                          "type": "string"
                        },
                        "phone": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string"
                        },
                        "updatedAt": {
                          "type": "string"
                        },
                        "createdById": {
                          "type": "string"
                        },
                        "createdBy": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "401": {
            "description": "Credenciales de administrador inválidas"
          },
          "403": {
            "description": "No autorizado - se requiere rol ADMIN"
          },
          "409": {
            "description": "Ya existe una tienda con ese nombre"
          }
        },
        "summary": "Crear nueva tienda",
        "tags": [
          "Stores"
        ]
      },
      "get": {
        "description": "Obtiene una lista de todas las tiendas registradas en el sistema con información del creador",
        "operationId": "StoreController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de tiendas obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "550e8400-e29b-41d4-a716-446655440001"
                      },
                      "name": {
                        "type": "string",
                        "example": "Tienda Principal"
                      },
                      "address": {
                        "type": "string",
                        "example": "Av. Principal 123"
                      },
                      "phone": {
                        "type": "string",
                        "example": "+123456789"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "createdById": {
                        "type": "string",
                        "example": "550e8400-e29b-41d4-a716-446655440002"
                      },
                      "createdBy": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440002"
                          },
                          "name": {
                            "type": "string",
                            "example": "Administrador"
                          },
                          "email": {
                            "type": "string",
                            "example": "admin@ejemplo.com"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "USER",
                              "ADMIN"
                            ],
                            "example": "ADMIN"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener todas las tiendas",
        "tags": [
          "Stores"
        ]
      }
    },
    "/store/{id}": {
      "get": {
        "description": "Obtiene los detalles de una tienda específica por su ID incluyendo información del creador",
        "operationId": "StoreController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tienda encontrada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "name": {
                      "type": "string",
                      "example": "Tienda Principal"
                    },
                    "address": {
                      "type": "string",
                      "example": "Av. Principal 123"
                    },
                    "phone": {
                      "type": "string",
                      "example": "+123456789"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdById": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440002"
                    },
                    "createdBy": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "550e8400-e29b-41d4-a716-446655440002"
                        },
                        "name": {
                          "type": "string",
                          "example": "Administrador"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@ejemplo.com"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "USER",
                            "ADMIN"
                          ],
                          "example": "ADMIN"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        },
        "summary": "Obtener tienda por ID",
        "tags": [
          "Stores"
        ]
      },
      "patch": {
        "description": "Actualiza los datos de una tienda existente. Requiere rol ADMIN. Solo se actualizarán los campos proporcionados en el body.",
        "operationId": "StoreController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Datos parciales de la tienda a actualizar. Todos los campos son opcionales.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStoreDto"
              },
              "examples": {
                "updateName": {
                  "summary": "Actualizar nombre de la tienda",
                  "value": {
                    "name": "Tienda Actualizada"
                  }
                },
                "updateAddress": {
                  "summary": "Actualizar dirección y teléfono",
                  "value": {
                    "address": "Calle Nueva 456",
                    "phone": "+987654321"
                  }
                },
                "updateAll": {
                  "summary": "Actualizar todos los campos",
                  "value": {
                    "name": "Tienda Completa",
                    "address": "Av. Central 789",
                    "phone": "+555123456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tienda actualizada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tienda actualizada exitosamente"
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "550e8400-e29b-41d4-a716-446655440001"
                        },
                        "name": {
                          "type": "string",
                          "example": "Tienda Actualizada"
                        },
                        "address": {
                          "type": "string",
                          "example": "Calle Nueva 456"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+987654321"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "createdById": {
                          "type": "string",
                          "example": "550e8400-e29b-41d4-a716-446655440002"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "403": {
            "description": "No autorizado - se requiere rol ADMIN"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        },
        "summary": "Actualizar tienda",
        "tags": [
          "Stores"
        ]
      },
      "delete": {
        "description": "Elimina una tienda del sistema permanentemente. Esta acción no se puede deshacer. Requiere rol ADMIN.",
        "operationId": "StoreController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tienda eliminada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tienda eliminada exitosamente"
                    },
                    "storeId": {
                      "type": "string",
                      "example": "550e8400-e29b-41d4-a716-446655440001"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado - se requiere rol ADMIN"
          },
          "404": {
            "description": "Tienda no encontrada"
          },
          "409": {
            "description": "No se puede eliminar la tienda - tiene dependencias activas"
          }
        },
        "summary": "Eliminar tienda",
        "tags": [
          "Stores"
        ]
      }
    },
    "/cash-session": {
      "post": {
        "description": "Crea una nueva sesión de caja para una tienda específica. Requiere autenticación JWT y rol USER o ADMIN. El usuario debe pertenecer a la tienda y no debe haber sesiones abiertas previas.",
        "operationId": "CashSessionController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Datos para crear la sesión de caja",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCashSessionDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "storeId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                    "openingAmount": 100.5
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sesión de caja creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Sesión de caja creada exitosamente"
                    },
                    "cashSession": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "openedAt": {
                          "type": "string"
                        },
                        "closedAt": {
                          "type": "string",
                          "nullable": true
                        },
                        "openedById": {
                          "type": "string"
                        },
                        "closedById": {
                          "type": "string",
                          "nullable": true
                        },
                        "status": {
                          "type": "string",
                          "example": "OPEN"
                        },
                        "openingAmount": {
                          "type": "number"
                        },
                        "closingAmount": {
                          "type": "number",
                          "nullable": true
                        },
                        "StoreId": {
                          "type": "string"
                        },
                        "UserId": {
                          "type": "string"
                        },
                        "Store": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "address": {
                              "type": "string",
                              "nullable": true
                            },
                            "phone": {
                              "type": "string",
                              "nullable": true
                            }
                          }
                        },
                        "User": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "username": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "401": {
            "description": "No autorizado"
          },
          "403": {
            "description": "No tienes permisos para crear sesiones en esta tienda"
          },
          "404": {
            "description": "La tienda especificada no existe"
          },
          "409": {
            "description": "Ya hay una sesión de caja abierta para esta tienda"
          }
        },
        "summary": "Crear nueva sesión de caja",
        "tags": [
          "Cash Sessions"
        ]
      },
      "get": {
        "description": "Obtiene una lista de todas las sesiones de caja registradas. Requiere rol ADMIN",
        "operationId": "CashSessionController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de sesiones de caja obtenida exitosamente"
          },
          "403": {
            "description": "No autorizado"
          }
        },
        "summary": "Obtener todas las sesiones de caja",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/cash-session/current/{storeId}": {
      "get": {
        "description": "Obtiene la sesión de caja actualmente abierta para una tienda específica. Requiere rol USER o ADMIN",
        "operationId": "CashSessionController_findCurrentSessionByStore",
        "parameters": [
          {
            "name": "storeId",
            "required": true,
            "in": "path",
            "description": "ID de la tienda para obtener la sesión actual",
            "schema": {
              "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión actual obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012"
                    },
                    "storeId": {
                      "type": "string",
                      "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                    },
                    "openedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "closedAt": {
                      "type": "string",
                      "format": "date-time",
                      "nullable": true
                    },
                    "openedById": {
                      "type": "string",
                      "example": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                    },
                    "closedById": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "OPEN",
                        "CLOSED"
                      ],
                      "example": "OPEN"
                    },
                    "openingAmount": {
                      "type": "number",
                      "example": 100.5
                    },
                    "closingAmount": {
                      "type": "number",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No hay sesión abierta para esta tienda",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "No hay sesión abierta para esta tienda"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener sesión de caja actual de una tienda",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/cash-session/store/{storeId}": {
      "get": {
        "description": "Obtiene todas las sesiones de caja de una tienda específica con paginación opcional. Requiere rol USER o ADMIN",
        "operationId": "CashSessionController_findByStore",
        "parameters": [
          {
            "name": "storeId",
            "required": true,
            "in": "path",
            "description": "ID de la tienda para obtener las sesiones",
            "schema": {
              "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Número de página (default: 1)",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Cantidad de resultados por página (default: 20)",
            "schema": {
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesiones de caja obtenidas exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "b2c3d4e5-f6a7-8901-bcde-f23456789012"
                          },
                          "storeId": {
                            "type": "string",
                            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
                          },
                          "openedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "closedAt": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          },
                          "openedById": {
                            "type": "string",
                            "example": "c3d4e5f6-a7b8-9012-cdef-345678901234"
                          },
                          "closedById": {
                            "type": "string",
                            "nullable": true
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "OPEN",
                              "CLOSED"
                            ],
                            "example": "CLOSED"
                          },
                          "openingAmount": {
                            "type": "number",
                            "example": 100.5
                          },
                          "closingAmount": {
                            "type": "number",
                            "example": 250.75
                          }
                        }
                      }
                    },
                    "total": {
                      "type": "number",
                      "example": 45,
                      "description": "Total de sesiones"
                    },
                    "page": {
                      "type": "number",
                      "example": 1,
                      "description": "Página actual"
                    },
                    "limit": {
                      "type": "number",
                      "example": 20,
                      "description": "Resultados por página"
                    },
                    "totalPages": {
                      "type": "number",
                      "example": 3,
                      "description": "Total de páginas"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "message": {
                      "type": "string",
                      "example": "No autorizado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Tienda no encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Tienda no encontrada"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Obtener sesiones de caja por tienda",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/cash-session/store/{storeId}/open": {
      "get": {
        "description": "Obtiene la sesión de caja actualmente abierta para una tienda específica. Requiere rol USER o ADMIN",
        "operationId": "CashSessionController_findOpenSessionByStore",
        "parameters": [
          {
            "name": "storeId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión abierta obtenida exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "No hay sesión abierta para esta tienda"
          }
        },
        "summary": "Obtener sesión abierta actual de una tienda",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/cash-session/{id}": {
      "get": {
        "description": "Obtiene los detalles de una sesión de caja específica por su ID. Requiere rol USER o ADMIN",
        "operationId": "CashSessionController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión de caja encontrada exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Sesión de caja no encontrada"
          }
        },
        "summary": "Obtener sesión de caja por ID",
        "tags": [
          "Cash Sessions"
        ]
      },
      "patch": {
        "description": "Actualiza los datos de una sesión de caja existente. Requiere rol ADMIN",
        "operationId": "CashSessionController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCashSessionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesión de caja actualizada exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Sesión de caja no encontrada"
          }
        },
        "summary": "Actualizar sesión de caja",
        "tags": [
          "Cash Sessions"
        ]
      },
      "delete": {
        "description": "Elimina una sesión de caja del sistema. Requiere rol ADMIN",
        "operationId": "CashSessionController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión de caja eliminada exitosamente"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Sesión de caja no encontrada"
          }
        },
        "summary": "Eliminar sesión de caja",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/cash-session/{id}/close": {
      "post": {
        "description": "Cierra una sesión de caja y genera el cuadre final. Reiere credenciales del usuario (email y password). Solo el usuario que abrió la sesión o un ADMIN pueden cerrarla.",
        "operationId": "CashSessionController_closeCashSession",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Credenciales del usuario que cierra la sesión",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CloseCashSessionDto"
              },
              "examples": {
                "example": {
                  "value": {
                    "email": "usuario@ejemplo.com",
                    "password": "contraseña123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sesión de caja cerrada exitosamente con cuadre final",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Sesión de caja cerrada exitosamente"
                    },
                    "cashSession": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "openedAt": {
                          "type": "string"
                        },
                        "closedAt": {
                          "type": "string"
                        },
                        "openedById": {
                          "type": "string"
                        },
                        "closedById": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "example": "CLOSED"
                        },
                        "openingAmount": {
                          "type": "number"
                        },
                        "closingAmount": {
                          "type": "number"
                        }
                      }
                    },
                    "cashBalance": {
                      "type": "object",
                      "properties": {
                        "openingAmount": {
                          "type": "number"
                        },
                        "totalIngresos": {
                          "type": "number"
                        },
                        "totalSalidas": {
                          "type": "number"
                        },
                        "balanceActual": {
                          "type": "number"
                        }
                      }
                    },
                    "movements": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "description": {
                            "type": "string"
                          },
                          "clientName": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos"
          },
          "401": {
            "description": "Credenciales inválidas"
          },
          "403": {
            "description": "No tienes permisos para cerrar esta sesión"
          },
          "404": {
            "description": "Sesión de caja no encontrada o ya está cerrada"
          }
        },
        "summary": "Cerrar sesión de caja",
        "tags": [
          "Cash Sessions"
        ]
      }
    },
    "/receipts/service/{orderId}": {
      "get": {
        "description": "Genera un recibo con toda la información necesaria para el PDF de una venta de servicios",
        "operationId": "ReceiptController_getServiceReceipt",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "description": "ID de la orden que contiene servicios",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Recibo de servicios generado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "receipt": {
                      "type": "object",
                      "properties": {
                        "businessName": {
                          "type": "string",
                          "example": "Tecnicentro JR"
                        },
                        "address": {
                          "type": "string",
                          "example": "Av. Principal 123"
                        },
                        "phone": {
                          "type": "string",
                          "example": "+1234567890"
                        },
                        "currentDate": {
                          "type": "string",
                          "example": "01/12/2025"
                        },
                        "currentTime": {
                          "type": "string",
                          "example": "15:30:45"
                        },
                        "orderNumber": {
                          "type": "string",
                          "example": "001-20251201-CIW0Y8NQ"
                        },
                        "sellerName": {
                          "type": "string",
                          "example": "Juan Vendedor"
                        },
                        "clientName": {
                          "type": "string",
                          "example": "Carlos Cliente"
                        },
                        "clientDni": {
                          "type": "string",
                          "example": "12345678"
                        },
                        "clientPhone": {
                          "type": "string",
                          "example": "987654321"
                        },
                        "paidAmount": {
                          "type": "number",
                          "example": 350
                        }
                      }
                    },
                    "services": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "service-uuid"
                          },
                          "name": {
                            "type": "string",
                            "example": "Reparación de teclado"
                          },
                          "price": {
                            "type": "number",
                            "example": 350
                          },
                          "payments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "example": "EFECTIVO"
                                },
                                "amount": {
                                  "type": "number",
                                  "example": 10
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "Orden no encontrada o no contiene servicios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Orden no encontrada"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener recibo de venta de servicios",
        "tags": [
          "Receipts"
        ]
      }
    },
    "/receipts/product/{orderId}": {
      "get": {
        "description": "Genera un recibo con toda la información necesaria para el PDF de una venta de productos",
        "operationId": "ReceiptController_getProductReceipt",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "description": "ID de la orden que contiene productos",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Recibo de productos generado exitosamente"
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "Orden no encontrada o no contiene productos"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener recibo de venta de productos",
        "tags": [
          "Receipts"
        ]
      }
    },
    "/receipts/advance/{serviceId}": {
      "get": {
        "description": "Genera un recibo para un adelanto de pago de servicio",
        "operationId": "ReceiptController_getAdvanceReceipt",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "description": "ID del servicio con adelanto",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Recibo de adelanto generado exitosamente"
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "Servicio no encontrado"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener recibo de adelanto de servicio",
        "tags": [
          "Receipts"
        ]
      }
    },
    "/receipts/completion/{serviceId}": {
      "get": {
        "description": "Genera un recibo para un servicio completado",
        "operationId": "ReceiptController_getCompletionReceipt",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "description": "ID del servicio completado",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Recibo de finalización generado exitosamente"
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "Servicio no encontrado o no está completado"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener recibo de servicio finalizado",
        "tags": [
          "Receipts"
        ]
      }
    },
    "/receipts/cash-close/{sessionId}": {
      "get": {
        "description": "Genera un recibo para el cierre de una sesión de caja",
        "operationId": "ReceiptController_getCashCloseReceipt",
        "parameters": [
          {
            "name": "sessionId",
            "required": true,
            "in": "path",
            "description": "ID de la sesión de caja cerrada",
            "schema": {
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Recibo de cierre de caja generado exitosamente"
          },
          "401": {
            "description": "No autorizado. Se requiere autenticación JWT"
          },
          "403": {
            "description": "Acceso denegado. Se requieren permisos adecuados"
          },
          "404": {
            "description": "Sesión de caja no encontrada o no está cerrada"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ],
        "summary": "Obtener recibo de cierre de caja",
        "tags": [
          "Receipts"
        ]
      }
    }
  },
  "info": {
    "title": "API Documentation",
    "description": "Documentación de la API de la aplicación",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "JWT-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "JWT",
        "description": "Ingrese el token JWT",
        "in": "header"
      }
    },
    "schemas": {
      "CreateUserRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "usuario@ejemplo.com",
            "description": "Correo electrónico del usuario"
          },
          "password": {
            "type": "string",
            "example": "passwordSeguro123",
            "description": "Contraseña del usuario (mínimo 6 caracteres)",
            "minLength": 6
          },
          "name": {
            "type": "string",
            "example": "Juan Pérez",
            "description": "Nombre completo del usuario"
          },
          "username": {
            "type": "string",
            "example": "juanperez",
            "description": "Nombre de usuario único"
          },
          "phone": {
            "type": "string",
            "example": "+1234567890",
            "description": "Número de teléfono del usuario (opcional)"
          },
          "birthdate": {
            "format": "date-time",
            "type": "string",
            "example": "1990-01-01",
            "description": "Fecha de nacimiento del usuario (opcional)"
          },
          "language": {
            "type": "string",
            "example": "es",
            "description": "Idioma preferido del usuario (opcional)"
          },
          "timezone": {
            "type": "string",
            "example": "America/Mexico_City",
            "description": "Zona horaria del usuario (opcional)"
          }
        },
        "required": [
          "email",
          "password",
          "name",
          "username"
        ]
      },
      "AuthChangePasswordDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "usuario@ejemplo.com",
            "description": "Correo electrónico del usuario"
          },
          "currentPassword": {
            "type": "string",
            "example": "contraseñaActual123",
            "description": "Contraseña actual del usuario"
          },
          "newPassword": {
            "type": "string",
            "example": "nuevaContraseñaSegura123",
            "description": "Nueva contraseña del usuario (mínimo 8 caracteres)",
            "minLength": 8
          }
        },
        "required": [
          "email",
          "currentPassword",
          "newPassword"
        ]
      },
      "CreateSimpleUserDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Juan Pérez",
            "description": "Nombre completo del usuario"
          },
          "username": {
            "type": "string",
            "example": "juanperez",
            "description": "Nombre de usuario único (opcional, se generará automáticamente si no se especifica)"
          },
          "email": {
            "type": "string",
            "example": "usuario@ejemplo.com",
            "description": "Correo electrónico del usuario (opcional)"
          },
          "phone": {
            "type": "string",
            "example": "+1234567890",
            "description": "Número de teléfono del usuario (opcional)"
          },
          "password": {
            "type": "string",
            "example": "passwordSeguro123",
            "description": "Contraseña del usuario (mínimo 6 caracteres)",
            "minLength": 6
          },
          "storeId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la tienda a la que pertenecerá el usuario (obligatorio)"
          }
        },
        "required": [
          "name",
          "password",
          "storeId"
        ]
      },
      "ChangePasswordDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {}
      },
      "ChangeRoleDto": {
        "type": "object",
        "properties": {}
      },
      "ContactDto": {
        "type": "object",
        "properties": {}
      },
      "CreateClientDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre completo del cliente",
            "example": "Juan Pérez"
          },
          "email": {
            "type": "string",
            "description": "Correo electrónico del cliente",
            "example": "juan.perez@example.com"
          },
          "phone": {
            "type": "string",
            "description": "Número de teléfono del cliente",
            "example": "+51987654321"
          },
          "address": {
            "type": "string",
            "description": "Dirección del cliente",
            "example": "Av. Los Olivos 123"
          },
          "ruc": {
            "type": "string",
            "description": "Número de RUC del cliente",
            "example": "20123456781"
          },
          "dni": {
            "type": "string",
            "description": "Número de DNI del cliente",
            "example": "76543210"
          },
          "userId": {
            "type": "string",
            "description": "ID del usuario que crea el cliente",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        },
        "required": [
          "dni",
          "userId"
        ]
      },
      "UpdateClientDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre completo del cliente",
            "example": "Juan Pérez"
          },
          "email": {
            "type": "string",
            "description": "Correo electrónico del cliente",
            "example": "juan.perez@example.com"
          },
          "phone": {
            "type": "string",
            "description": "Número de teléfono del cliente",
            "example": "+51987654321"
          },
          "address": {
            "type": "string",
            "description": "Dirección del cliente",
            "example": "Av. Los Olivos 123"
          },
          "ruc": {
            "type": "string",
            "description": "Número de RUC del cliente",
            "example": "20123456781"
          },
          "dni": {
            "type": "string",
            "description": "Número de DNI del cliente",
            "example": "76543210"
          },
          "userId": {
            "type": "string",
            "description": "ID del usuario que crea el cliente",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        }
      },
      "CreateOrderDto": {
        "type": "object",
        "properties": {}
      },
      "CompleteOrderDto": {
        "type": "object",
        "properties": {}
      },
      "CreateCashMovementDto": {
        "type": "object",
        "properties": {
          "cashSessionId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la sesión de caja (obligatorio)"
          },
          "amount": {
            "type": "number",
            "example": 100.5,
            "description": "Monto del movimiento (puede ser negativo para salidas)"
          },
          "type": {
            "type": "string",
            "example": "INCOME",
            "description": "Tipo de movimiento (INCOME o EXPENSE)",
            "enum": [
              "INCOME",
              "EXPENSE"
            ]
          },
          "description": {
            "type": "string",
            "example": "Venta de productos varios",
            "description": "Descripción del movimiento (obligatoria)"
          },
          "orderId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la orden (opcional, solo para movimientos generados por órdenes)"
          },
          "clientId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID del cliente (opcional, solo para movimientos generados por órdenes)"
          }
        },
        "required": [
          "cashSessionId",
          "amount",
          "type",
          "description"
        ]
      },
      "UpdateCashMovementDto": {
        "type": "object",
        "properties": {
          "cashSessionId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la sesión de caja (obligatorio)"
          },
          "amount": {
            "type": "number",
            "example": 100.5,
            "description": "Monto del movimiento (puede ser negativo para salidas)"
          },
          "type": {
            "type": "string",
            "example": "INCOME",
            "description": "Tipo de movimiento (INCOME o EXPENSE)",
            "enum": [
              "INCOME",
              "EXPENSE"
            ]
          },
          "description": {
            "type": "string",
            "example": "Venta de productos varios",
            "description": "Descripción del movimiento (obligatoria)"
          },
          "orderId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la orden (opcional, solo para movimientos generados por órdenes)"
          },
          "clientId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID del cliente (opcional, solo para movimientos generados por órdenes)"
          }
        }
      },
      "CreateCatalogProductDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del producto (catálogo maestro)",
            "example": "Aceite de motor 10W40",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "description": "Descripción detallada del producto",
            "example": "Aceite sintético para motor de alto rendimiento",
            "maxLength": 500
          },
          "basePrice": {
            "type": "number",
            "description": "Precio de venta sugerido (base)",
            "example": 29.99,
            "minimum": 0
          },
          "buyCost": {
            "type": "number",
            "description": "Costo de adquisición del producto (referencia)",
            "example": 20.5,
            "minimum": 0
          },
          "createdById": {
            "type": "string",
            "description": "ID del usuario que crea el producto en el catálogo",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateProductDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nombre del producto",
            "example": "Aceite de motor 10W40 Premium",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "description": "Descripción detallada del producto",
            "example": "Aceite sintético para motor de alto rendimiento con aditivos de protección",
            "maxLength": 500
          },
          "basePrice": {
            "type": "number",
            "description": "Precio de venta sugerido (base)",
            "example": 29.99,
            "minimum": 0
          },
          "buyCost": {
            "type": "number",
            "description": "Costo de adquisición del producto (referencia)",
            "example": 20.5,
            "minimum": 0
          },
          "createdById": {
            "type": "string",
            "description": "ID del usuario que creó el producto",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        }
      },
      "CreateStoreProductDto": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "description": "ID del producto del catálogo maestro (si el producto ya existe)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "createNewProduct": {
            "type": "boolean",
            "description": "Indica si se debe crear un nuevo producto en el catálogo",
            "example": false,
            "default": false
          },
          "name": {
            "type": "string",
            "description": "Nombre del nuevo producto (solo si createNewProduct es true)",
            "example": "Aceite de Motor 10W40",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "description": "Descripción del nuevo producto (solo si createNewProduct es true)",
            "example": "Aceite sintético de alta calidad para motores",
            "maxLength": 500
          },
          "basePrice": {
            "type": "number",
            "description": "Precio base del nuevo producto (solo si createNewProduct es true)",
            "example": 29.99,
            "minimum": 0
          },
          "buyCost": {
            "type": "number",
            "description": "Costo de compra del nuevo producto (solo si createNewProduct es true)",
            "example": 20.5,
            "minimum": 0
          },
          "storeId": {
            "type": "string",
            "description": "ID de la tienda donde se registrará el producto",
            "example": "456e7890-e12b-34d5-a678-426614174000"
          },
          "price": {
            "type": "number",
            "description": "Precio de venta del producto en esta tienda",
            "example": 29.99,
            "minimum": 0
          },
          "stock": {
            "type": "number",
            "description": "Cantidad en inventario para esta tienda",
            "example": 50,
            "default": 0,
            "minimum": 0
          },
          "stockThreshold": {
            "type": "number",
            "description": "Umbral mínimo de inventario para alertas en esta tienda",
            "example": 5,
            "default": 1,
            "minimum": 0
          }
        },
        "required": [
          "storeId",
          "price",
          "stock",
          "stockThreshold"
        ]
      },
      "UpdateStoreProductDto": {
        "type": "object",
        "properties": {
          "price": {
            "type": "number",
            "description": "Precio de venta del producto en esta tienda",
            "example": 29.99,
            "minimum": 0
          },
          "stock": {
            "type": "number",
            "description": "Cantidad en inventario para esta tienda",
            "example": 50,
            "minimum": 0
          },
          "stockThreshold": {
            "type": "number",
            "description": "Umbral mínimo de inventario para alertas en esta tienda",
            "example": 5,
            "minimum": 0
          },
          "name": {
            "type": "string",
            "description": "Nombre del producto (solo administradores)",
            "example": "Aceite de Motor 10W40"
          },
          "description": {
            "type": "string",
            "description": "Descripción del producto (solo administradores)",
            "example": "Aceite sintético de alta calidad para motores modernos"
          },
          "buyCost": {
            "type": "number",
            "description": "Costo de compra del producto (solo administradores)",
            "example": 20.5,
            "minimum": 0
          },
          "basePrice": {
            "type": "number",
            "description": "Precio base de referencia del producto (solo administradores)",
            "example": 29.99,
            "minimum": 0
          },
          "productId": {
            "type": "string",
            "description": "ID del producto del catálogo maestro",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "storeId": {
            "type": "string",
            "description": "ID de la tienda donde está registrado el producto",
            "example": "456e7890-e12b-34d5-a678-426614174000"
          }
        }
      },
      "Service": {
        "type": "object",
        "properties": {}
      },
      "UpdateServiceDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "REPAIR",
              "WARRANTY"
            ],
            "default": "REPAIR",
            "description": "Tipo de servicio",
            "example": "REPAIR"
          },
          "status": {
            "type": "string",
            "enum": [
              "IN_PROGRESS",
              "COMPLETED",
              "DELIVERED",
              "PAID",
              "ANNULLATED"
            ],
            "default": "IN_PROGRESS",
            "description": "Estado del servicio",
            "example": "IN_PROGRESS"
          },
          "name": {
            "type": "string",
            "description": "Nombre del servicio",
            "example": "Reparación de motor"
          },
          "description": {
            "type": "string",
            "description": "Descripción detallada del servicio",
            "example": "Revisión y reparación completa del motor"
          },
          "photoUrls": {
            "default": [],
            "description": "URLs de las fotos del servicio",
            "example": [
              "https://ejemplo.com/foto1.jpg",
              "https://ejemplo.com/foto2.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "price": {
            "type": "number",
            "description": "Precio del servicio",
            "example": 250.5
          },
          "orderId": {
            "type": "string",
            "description": "ID de la orden asociada",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {}
      },
      "CreateImageDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateImageDto": {
        "type": "object",
        "properties": {}
      },
      "CreateStoreDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateStoreDto": {
        "type": "object",
        "properties": {}
      },
      "CreateCashSessionDto": {
        "type": "object",
        "properties": {
          "storeId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la tienda donde se creará la sesión de caja (obligatorio)"
          },
          "openingAmount": {
            "type": "number",
            "example": 100.5,
            "description": "Monto inicial de apertura de caja (opcional, por defecto 0.00)",
            "minimum": 0
          }
        },
        "required": [
          "storeId"
        ]
      },
      "UpdateCashSessionDto": {
        "type": "object",
        "properties": {
          "storeId": {
            "type": "string",
            "example": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "description": "ID de la tienda donde se creará la sesión de caja (obligatorio)"
          },
          "openingAmount": {
            "type": "number",
            "example": 100.5,
            "description": "Monto inicial de apertura de caja (opcional, por defecto 0.00)",
            "minimum": 0
          }
        }
      },
      "CloseCashSessionDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "usuario@ejemplo.com",
            "description": "Correo electrónico del usuario que cierra la sesión"
          },
          "password": {
            "type": "string",
            "example": "contraseña123",
            "description": "Contraseña del usuario que cierra la sesión"
          }
        },
        "required": [
          "email",
          "password"
        ]
      }
    }
  }
}